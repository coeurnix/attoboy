# Начало работы

---

## Добро пожаловать в Attoboy!

Attoboy — это комплектная библиотека на C++, разработанная, чтобы создание чрезвычайно маленьких и переносимых исполняемых файлов Windows было таким же простым, как написание скриптов на Python. Независимо от того, являетесь ли вы полным новичком в C++ или опытным разработчиком, желающим создавать компактные, автономные утилиты, attoboy предлагает вам чистый, современный и дружелюбный к новичкам подход к написанию мощных программ.

### Что делает Attoboy особенным?

- **Крошечные исполняемые файлы**: Большинство программ компилируются в файлы размером 10–100 КБ  
- **Нулевые зависимости**: Ваши исполняемые файлы работают на любой Windows-машине без установщиков или рантаймов  
- **Всё включено**: Работа со строками, коллекции, ввод/вывод файлов, сеть, интеграция с ИИ и многое другое — всё в одной библиотеке  
- **Подходит для новичков**: Чистый, читабельный API, вдохновлённый Python и современными языками  
- **100% протестировано**: Полное покрытие тестами обеспечивает надёжность  
- **Хорошая документация**: Подробная документация и учебники, которые помогут вам добиться успеха

Если вы когда-либо хотели создавать консольные утилиты, файловые инструменты, веб-клиенты или даже приложения с поддержкой ИИ, компилируемые в исполняемые файлы меньше, чем большинство изображений, вы попали по адресу.

---

## Требования

Прежде чем собирать attoboy и начинать создавать собственные программы, вам нужно установить несколько инструментов. Не переживайте — это просто, и мы проведём вас через процесс.

### 1. Компилятор C++

Attoboy поддерживает две цепочки инструментов компиляции на Windows. Вам нужно установить только **одну** из них (хотя можно установить обе, если хотите):

#### Вариант A: Visual Studio (MSVC) — рекомендуется

Компилятор MSVC из Microsoft Visual Studio производит самые маленькие исполняемые файлы с attoboy. Мы рекомендуем использовать **Visual Studio 2022 Community Edition**, который полностью бесплатен.

**Загрузка и установка:**

1. Перейдите на страницу загрузок [Visual Studio Downloads](https://visualstudio.microsoft.com/downloads/)
2. Скачайте **Visual Studio Community 2022** (он бесплатен!)
3. Запустите установщик
4. При выборе рабочих нагрузок выберите **«Разработка классических приложений на C++»**
5. В разделе «Сведения об установке» справа убедитесь, что выбраны следующие компоненты:
   - MSVC v143 - VS 2022 C++ x64/x86 build tools
   - C++ CMake tools for Windows
6. Нажмите «Install» и дождитесь завершения (это может занять 20–30 минут)

**После установки** вам нужно будет использовать «Developer Command Prompt for VS 2022» или «x86 Native Tools Command Prompt for VS 2022» для сборки attoboy. Вы найдёте их в меню "Пуск" в разделе «Visual Studio 2022».

#### Вариант B: MinGW-w64 (GCC)

MinGW предоставляет компилятор GCC для Windows. Это хороший вариант, если вы предпочитаете GCC или хотите более лёгкую установку.

**Загрузка и установка:**

1. Перейдите на страницу загрузок [WinLibs Downloads](https://winlibs.com/) (рекомендуемая дистрибуция MinGW)
2. Скачайте последнюю версию с рантаймом **UCRT** (ищите версию для Win32)
3. Распакуйте скачанный архив в папку, например `C:\mingw32`
4. Добавьте каталог `bin` в ваш PATH:
   - Откройте «Переменные среды» (поиск по "environment" в меню Пуск)
   - В разделе «Системные переменные» найдите и отредактируйте «Path»
   - Нажмите «Создать» и добавьте `C:\mingw32\bin` (или путь, куда вы распаковали)
   - Нажмите «OK» для сохранения

**Проверьте установку**, открыв новый командный Prompt и введя:
```
gcc --version
```

Вы должны увидеть отображение информации о версии.

### 2. Система сборки CMake

CMake — это кросс-платформенная система сборки, которая упрощает компиляцию attoboy и примеров.

**Загрузка и установка:**

1. Перейдите на страницу загрузок [CMake Downloads](https://cmake.org/download/)
2. Скачайте последний **Windows x64 Installer** (ищите файл вида `cmake-3.xx.x-windows-x86_64.msi`)
3. Запустите установщик
4. При появлении запроса выберите **«Add CMake to the system PATH for all users»** (или для текущего пользователя)
5. Пройдите оставшиеся шаги установки

**Проверьте установку**, открыв новый командный Prompt и введя:
```
cmake --version
```

Вы должны увидеть информацию о версии.

### 3. (Необязательно) Python

Python нужен только в том случае, если вы хотите запустить полный набор тестов. Он не требуется для сборки attoboy или использования в ваших программах.

Если вы хотите запускать тесты:

1. Перейдите на [Python.org](https://www.python.org/downloads/)
2. Скачайте Python 3.10 или новее
3. Запустите установщик
4. **Важно**: на шаге установки отметьте «Add Python to PATH»
5. Нажмите «Install Now»

---

## Сборка Attoboy

Теперь, когда инструменты установлены, давайте соберём attoboy. Этот процесс скомпилирует библиотеку и создаст удобную папку «distribution», которая содержит всё необходимое для начала написания собственных программ.

### Шаг 1: Получение исходного кода

Если вы ещё не сделали этого, скачайте или клонируйте репозиторий attoboy:

```bash
git clone https://github.com/coeurnix/attoboy.git
cd attoboy
```

Или скачайте и распакуйте ZIP-файл с GitHub.

### Шаг 2: Генерация файлов сборки

Откройте командную строку в каталоге attoboy. Команды немного отличаются в зависимости от используемого компилятора:

#### Для MSVC (Visual Studio):

Убедитесь, что вы используете **"x86 Native Tools Command Prompt for VS 2022"** или **"Developer Command Prompt for VS 2022"** (а не обычный Command Prompt).

```bash
cmake -G "Visual Studio 17 2022" -A Win32 -B build_msvc
```

Это создаст решение Visual Studio в директории `build_msvc`.

#### Для MinGW (GCC):

```bash
cmake -G "MinGW Makefiles" -B build
```

Это создаст Makefiles в директории `build`.

### Шаг 3: Полная сборка

Теперь скомпилируйте библиотеку, примеры и создайте пакет дистрибутива:

#### Для MSVC:

```bash
cmake --build build_msvc --config Release
```

#### Для MinGW:

```bash
cmake --build build
```

Это займёт минуту или две. Вы увидите сообщения о прогрессе, пока CMake собирает библиотеку, все примеры и упаковывает всё в папку дистрибутива.

### Шаг 4: Поздравляем!

Если сборка прошла успешно, вы увидите сообщение об успехе. Ваша скомпилированная библиотека и примеры теперь готовы.

**Что было собрано?**

- **Библиотека**: Скомпилированная библиотека attoboy (`attoboy.lib` для MSVC или `libattoboy.a` для MinGW)  
- **Примеры**: 15 примерных программ в `build_msvc/examples/` или `build/examples/`  
- **Дистрибутив**: Готовый к использованию пакет в `build_msvc/dist/` или `build/dist/`

Папка **dist** особая — она содержит всё, что нужно для сборки ваших собственных программ на attoboy без повторного обращения к CMake!

---

## Использование папки Distribution

Папка `dist` (внутри `build_msvc` или `build`) — это полный, автономный пакет для сборки программ на attoboy. Содержимое:

```
dist/
├── include/
│   └── attoboy/
│       └── attoboy.h       (The complete attoboy library header)
├── lib/
│   └── attoboy.lib         (The compiled library - .lib for MSVC, .a for MinGW)
├── docs/                   (Complete HTML documentation)
└── attobuild.bat           (Magic build script)
```

### Магия attobuild.bat

Скрипт `attobuild.bat` — простой и мощный способ компилировать ваши программы на attoboy. Он автоматически определяет ваш компилятор (MSVC или MinGW) и использует корректные флаги для получения маленьких, оптимизированных исполняемых файлов.

### Ваша первая программа

Давайте создадим вашу первую программу на attoboy.

**Шаг 1:** Перейдите в папку `dist`:

```bash
cd build_msvc\dist
```
(или `cd build\dist` для MinGW)

**Шаг 2:** Создайте новый файл `hello.cpp` со следующим содержимым:

```cpp
#include <attoboy/attoboy.h>

using namespace attoboy;

void atto_main() {
  Log("Hello from my first attoboy program!");
  Exit();
}
```

**Шаг 3:** Соберите его с помощью attobuild:

```bash
attobuild.bat hello.cpp
```

**Шаг 4:** Запустите программу:

```bash
hello.exe
```

Вы должны увидеть: `Hello from my first attoboy program!`

**Шаг 5:** Проверьте размер:

```bash
dir hello.exe
```

Ваш исполняемый файл должен быть около 4–5 КБ. Это полноценная автономная программа меньшего размера, чем большинство текстовых документов.

### Сборка более сложных программ

Скрипт `attobuild.bat` работает одинаково для любой программы на attoboy, независимо от её сложности:

```bash
attobuild.bat my_utility.cpp
attobuild.bat calculator.cpp
attobuild.bat web_scraper.cpp
```

Просто напишите код, выполните `attobuild.bat yourfile.cpp`, и вы получите маленький исполняемый файл, готовый к распространению.

### Понимание процесса сборки

Если вам интересно, что делает `attobuild.bat` за кулисами, откройте его в текстовом редакторе. Он хорошо прокомментирован и показывает точно, какие флаги компилятора нужны для получения маленьких исполняемых файлов. Вы можете использовать эти знания для интеграции attoboy в свои проекты CMake или другие системы сборки.

---

## Запуск набора тестов (необязательно)

Если у вас установлен Python и вы хотите убедиться, что attoboy корректно работает на вашей системе, вы можете запустить полный набор тестов:

### Базовые тесты (Интернет не требуется)

```bash
cmake --build build_msvc --config Release --target coverage
```

Это выполнит все тесты, создавая мок-сервер для вызовов Интернета и ИИ. В конце будут показаны статистики покрытия.

### Полные тесты (Требуется ключ OpenAI API)

```bash
set OPENAI_API_KEY=your_api_key_here
cmake --build build_msvc --config Release --target coverage_live
```

Это запустит **все** тесты, включая реальные API-вызовы к OpenAI. Обратите внимание, что это будет стоить небольшую сумму денег.

---

## Документация и учебные материалы

Теперь, когда всё настроено, куда идти дальше:

### Учебник

**[Tutorial](../tutorial/README.md)** — лучшее место для начала изучения attoboy. Он проведёт вас по возможностям библиотеки с понятными объяснениями и практическими примерами. Даже если вы совсем новичок в C++, учебник поможет вам освоиться.

### API документация

Папка **docs** (включена в ваш `dist`) содержит полную API-документацию для каждого класса и функции в attoboy. Откройте `docs/index.html` в вашем веб-браузере, чтобы просмотреть полную справку.

Ниже краткий обзор основных типов, которые вы будете использовать:

- **String**: Неизменяемые UTF-8 строки с богатыми методами манипуляции  
- **List**: Динамические массивы, которые могут содержать значения разных типов  
- **Map**: Словари ключ-значение  
- **Set**: Коллекции уникальных значений  
- **Path**: Работа с путями к файлам и каталогам  
- **File**: Ввод/вывод для файлов и сокетов  
- **Buffer**: Обработка бинарных данных с компрессией и шифрованием  
- **DateTime**: Работа с датой и временем  
- **WebRequest/WebResponse**: Функциональность HTTP-клиента  
- **AI/Conversation/Embedding**: Интеграция с ИИ, совместимая с OpenAI  
- **Console**: Богатый интерфейс консоли с цветами, меню и индикаторами прогресса  
- **Arguments**: Разбор аргументов командной строки  
- **Thread/Mutex**: Поддержка многопоточности  
- **Math**: Математические операции и константы  
- **Subprocess**: Запуск внешних программ  
- **Registry**: Доступ к реестру Windows

---

## Получение помощи

Если у вас возникли проблемы или вопросы:

1. **Проверьте учебник**: Большинство часто задаваемых вопросов там освещены  
2. **Просмотрите примеры**: Посмотрите рабочий код, демонстрирующий возможности  
3. **Прочитайте API-документацию**: Подробная справка по каждой функции  
4. **Проверьте Issues на GitHub**: Узнайте, сталкивались ли другие с похожими проблемами  
5. **Откройте Issue**: Сообщите об ошибках или задайте вопросы на GitHub

---

Желаем успехов и спасибо за использование Attoboy!

---

*Создано [coeurnix](https://github.com/coeurnix)*

*Лицензировано по лицензии MIT*