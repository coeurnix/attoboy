# String

## æ¦‚è§ˆ

`attoboy::String` ç±»æ˜¯ attoboy åº“ä¸­çš„æ ¸å¿ƒæ–‡æœ¬ç±»å‹ã€‚å®ƒè¡¨ç¤ºä¸€ä¸ª**ä¸å¯å˜çš„ UTF-8 å­—ç¬¦ä¸²**ï¼Œå¹¶æä¾›ä¸°å¯Œçš„æ“ä½œç”¨äºæ£€æŸ¥ã€æœç´¢ã€å˜æ¢ã€æ‹†åˆ†/åˆå¹¶ä»¥åŠæ ¼å¼åŒ–ã€‚å…¶è®¾è®¡ç›®æ ‡æ˜¯ï¼š

* **æ˜“äºä½¿ç”¨**ï¼šæ„é€ å‡½æ•°æ¥å—å¤šç§å¸¸è§ç±»å‹ï¼ˆå¸ƒå°”å€¼ã€æ•°å­—ã€å®¹å™¨ï¼‰ã€‚
* **é»˜è®¤å®‰å…¨**ï¼šåŸºäºå­—ç¬¦çš„æ“ä½œéµå®ˆ UTF-8 ç ç‚¹è¾¹ç•Œã€‚
* **æ–¹ä¾¿**ï¼šä¸ `List`ã€`Map` å’Œ `Set` çš„é›†æˆï¼Œæ”¯æŒç®€å•çš„ JSON é£æ ¼è½¬æ¢å’Œæ¨¡æ¿åŒ–æ ¼å¼åŒ–ã€‚
* **é€‚åˆå¾®å‹äºŒè¿›åˆ¶**ï¼šæ— éœ€ C++ æ ‡å‡†åº“æˆ– CRT ä¹Ÿå¯å·¥ä½œã€‚

ä»é«˜å±‚æ¥çœ‹ï¼Œä½ å¯ä»¥å°† `String` è§†ä¸º attoboy å¯¹ `std::string` çš„æ›¿ä»£ï¼Œä½†å…·æœ‰ï¼š

* **UTF-8 æ„ŸçŸ¥èƒ½åŠ›**ï¼ˆå­—ç¬¦ vs. å­—èŠ‚ï¼‰ã€‚
* **ä¸å¯å˜æ€§**ï¼šä¸€æ—¦åˆ›å»ºï¼Œå…¶å†…å®¹æ°¸ä¸æ”¹å˜ã€‚
* å†…å»ºä¸å¤šç§ attoboy ç±»å‹ä¹‹é—´çš„äº’ç›¸è½¬æ¢ã€‚

### ä¸å¯å˜æ€§ä¸å€¼è¯­ä¹‰

`String` æ˜¯**ä¸å¯å˜çš„**ï¼šå…¶æˆå‘˜å‡½æ•°ä¸ä¼šä¿®æ”¹å·²æœ‰å­—ç¬¦ä¸²å¯¹è±¡çš„å†…å®¹ã€‚ä»»ä½•â€œä¿®æ”¹â€å­—ç¬¦ä¸²çš„æ“ä½œéƒ½ä¼šè¿”å›ä¸€ä¸ª**æ–°çš„** `String`ï¼Œå…¶ä¸­åŒ…å«å˜æ¢åçš„å†…å®¹ã€‚

ä¾‹å¦‚ï¼š

```cpp
using namespace attoboy;

String original("hello");
String upper = original.upper();

// original is still "hello"
// upper is "HELLO"
```

è¿™ç§ä¸å¯å˜æ€§æœ‰å¤šæ–¹é¢çš„å¥½å¤„ï¼š

* ä½ å¯ä»¥åœ¨ç¨‹åºçš„å¤šä¸ªéƒ¨åˆ†ï¼ˆä»¥åŠå¤šçº¿ç¨‹ä¹‹é—´ï¼‰å®‰å…¨åœ°å…±äº« `String` å®ä¾‹ï¼Œè€Œæ— éœ€æ‹…å¿ƒè¢«æ„å¤–ä¿®æ”¹ã€‚
* æ¥æ”¶ `String` å‚æ•°çš„å‡½æ•°æ— éœ€ä¸ºå®‰å…¨èµ·è§è¿›è¡Œæ‹·è´ï¼›å®ƒä»¬çŸ¥é“è¯¥å¯¹è±¡ä¸èƒ½è¢«æ›´æ”¹ã€‚
* åœ¨å†…éƒ¨å®ç°ä¸Šï¼Œå¯ä»¥åœ¨æ‹·è´æˆ–èµ‹å€¼æ—¶é€šè¿‡å…±äº«åº•å±‚å­˜å‚¨æ¥ä¼˜åŒ–å†…å­˜ä½¿ç”¨ã€‚

### UTF-8ã€å­—ç¬¦ä¸å­—èŠ‚

åº“åœ¨å„å¤„ç»Ÿä¸€ä½¿ç”¨ **UTF-8 ç¼–ç **ã€‚è¿™åœ¨å®è·µä¸Šæœ‰ä¸¤ä¸ªåæœï¼š

1. ä¸€ä¸ªç”¨æˆ·å¯è§çš„å­—ç¬¦ï¼ˆUnicode **ç ç‚¹**ï¼‰å¯èƒ½å ç”¨**å¤šä¸ªå­—èŠ‚**ã€‚
2. æŸäº›æ“ä½œæ˜¯æ ¹æ®**å­—ç¬¦**ï¼ˆç ç‚¹ï¼‰å®šä¹‰çš„ï¼Œè€Œå¦ä¸€äº›æ“ä½œåˆ™åŸºäº**åŸå§‹å­—èŠ‚**ã€‚

`String` API åŒæ—¶æš´éœ²è¿™ä¸¤ç§è§†å›¾ï¼š

* **åŸºäºå­—ç¬¦ï¼ˆUTF-8 æ„ŸçŸ¥ï¼‰**ï¼š

  * `length()`
  * `at()`
  * `substring()`
  * `getPositionOf()`
  * `trim()`ã€`upper()`ã€`lower()`ã€`reverse()`ï¼ˆæŒ‰å­—ç¬¦ï¼‰
* **åŸºäºå­—èŠ‚ï¼ˆåŸå§‹ï¼‰**ï¼š

  * `byteLength()`
  * `byteAt()`
  * `byteSubstring()`
  * `FromCStr()`ï¼ˆä½¿ç”¨åŸå§‹å­—èŠ‚é•¿åº¦ï¼‰

åœ¨å¤„ç†äººç±»å¯è¯»æ–‡æœ¬ï¼ˆç”¨æˆ·ç•Œé¢ã€æ—¥å¿—ç­‰ï¼‰æ—¶ï¼Œä½ å‡ ä¹æ€»æ˜¯åº”è¯¥ä½¿ç”¨**åŸºäºå­—ç¬¦**çš„æ“ä½œã€‚å½“ä½ å¤„ç†åè®®æˆ–äºŒè¿›åˆ¶ç¼–ç ä¸”ç²¾ç¡®å­—èŠ‚ä½ç½®å¾ˆé‡è¦æ—¶ï¼Œå†ä½¿ç”¨åŸºäºå­—èŠ‚çš„ç‰ˆæœ¬ã€‚

### ç´¢å¼•ä¸è´Ÿç´¢å¼•

è‹¥å¹² `String` å‡½æ•°æ¥å—**ç´¢å¼•**ï¼ˆä½ç½®ï¼‰æˆ–**åŒºé—´**ï¼š

* ç´¢å¼•æ˜¯**ä» 0 å¼€å§‹**çš„ï¼Œå…¶ä¸­ `0` è¡¨ç¤ºç¬¬ä¸€ä¸ªå­—ç¬¦ï¼ˆæˆ–å­—èŠ‚ï¼‰ã€‚
* ä¸€äº›å‡½æ•°æ˜¾å¼æ”¯æŒ**è´Ÿç´¢å¼•**ï¼Œç”¨äºä»æœ«å°¾å¼€å§‹è®¡æ•°ï¼š

  * `at(int index)`
  * `byteAt(int index)`
  * `substring(int start, int end = -1)`

å¯¹äºè¿™äº›å‡½æ•°ï¼š

* `-1` è¡¨ç¤ºâ€œæœ€åä¸€ä¸ªå­—ç¬¦â€ã€‚
* `-2` è¡¨ç¤ºâ€œå€’æ•°ç¬¬äºŒä¸ªå­—ç¬¦â€ï¼Œä»¥æ­¤ç±»æ¨ã€‚

å¯¹äº `substring(start, end)`ï¼š

* `start` å’Œ `end` æ˜¯å­—ç¬¦ç´¢å¼•ã€‚
* `end` æ˜¯**æ’ä»–**çš„ï¼ˆä½ç½®ä¸º `end` çš„å­—ç¬¦ä¸åŒ…å«åœ¨ç»“æœä¸­ï¼‰ã€‚
* å¦‚æœ `end` ä¸º `-1`ï¼ˆé»˜è®¤å€¼ï¼‰ï¼Œå­ä¸²å°†ä¸€ç›´å»¶ä¼¸åˆ°å­—ç¬¦ä¸²æœ«å°¾ã€‚

### ä¸å…¶ä»– attoboy ç±»å‹çš„é›†æˆ

`String` ç±»ä¸å…¶ä»– attoboy æ ¸å¿ƒç±»å‹ç´§å¯†é…åˆï¼š

* `String(const List &list)` å’Œ `String(const Set &set)` ç”Ÿæˆ JSON æ•°ç»„å­—ç¬¦ä¸²ã€‚
* `String(const Map &map)` ç”Ÿæˆ JSON å¯¹è±¡å­—ç¬¦ä¸²ã€‚
* `format(const List &list)` å’Œ `format(const Map &map)` æ›¿æ¢ `{0}` æˆ– `{key}` ç­‰å ä½ç¬¦ã€‚
* `lines()`ã€`split()` å’Œ `join()` ä¸ `List` é›†æˆï¼Œå®ç°ç®€å•çš„åˆ†è¯ä¸é‡ç»„ã€‚

è¿™ä½¿å¾—åœ¨æ•°æ®ç»“æ„ä¹‹é—´ç§»åŠ¨æ–‡æœ¬ã€åºåˆ—åŒ–ä¸º JSON ä»¥åŠæ„å»ºæ¨¡æ¿åŒ–æ¶ˆæ¯éƒ½å˜å¾—éå¸¸ç®€å•ï¼Œæ— éœ€é¢å¤–åº“ã€‚

---

## å‚è€ƒ

ä¸‹é¢çš„æ¯ä¸ªæ¡ç›®ä»‹ç» `attoboy::String` çš„ä¸€ä¸ªå…¬å…±æ„é€ å‡½æ•°ã€æ–¹æ³•ã€é™æ€å‡½æ•°æˆ–è¿ç®—ç¬¦ã€‚å¯¹æ¯ä¸€é¡¹ï¼Œä½ å°†çœ‹åˆ°ï¼š

* **Signature**â€”â€”å¤´æ–‡ä»¶ä¸­çš„ç²¾ç¡®å£°æ˜ã€‚
* **Synopsis**â€”â€”åŸå§‹çš„ä¸€è¡Œ Doxygen æ³¨é‡Šã€‚
* **Parameters** ä¸ **Return value** è¯´æ˜ã€‚
* **In Depth**â€”â€”é¢å¤–ç»†èŠ‚ã€æ³¨æ„äº‹é¡¹ä»¥åŠä¸€ä¸ªç®€çŸ­ç¤ºä¾‹ã€‚

> **æ³¨æ„ï¼š** æ‰€æœ‰ç¤ºä¾‹éƒ½å‡å®š `using namespace attoboy;`ã€‚

---

#### `String()`

**Signature**

```cpp
String();
```

**Synopsis**  
åˆ›å»ºä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚

**Parameters**

* *(æ— )*

**Return value**

* *(æ„é€ å‡½æ•°ï¼›ä¸é€‚ç”¨)*

**In Depth**

é»˜è®¤æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªä¸åŒ…å«ä»»ä½•å­—ç¬¦å’Œä»»ä½•å­—èŠ‚çš„ `String`ã€‚å¯¹äºè¿™æ ·çš„å­—ç¬¦ä¸²ï¼š

* `length()` è¿”å› `0`ã€‚
* `byteLength()` è¿”å› `0`ã€‚
* `isEmpty()` è¿”å› `true`ã€‚
* `c_str()` è¿”å›æŒ‡å‘å•ä¸ª `'\0'` å­—èŠ‚çš„æŒ‡é’ˆã€‚

ç©ºå­—ç¬¦ä¸²æ˜¯è‡ªç„¶çš„é»˜è®¤å€¼ï¼Œä¹Ÿæ˜¯é€šè¿‡æ‹¼æ¥ç­‰æ“ä½œæ„å»ºæ–°å­—ç¬¦ä¸²æ—¶å¸¸è§çš„èµ·ç‚¹ã€‚

**Example**

```cpp
String s;
String message = s.append("Hello");  // message == "Hello"
```

*æ­¤ç¤ºä¾‹ä»ç©ºçš„ `String` å¼€å§‹ï¼Œé€šè¿‡è¿½åŠ æ–‡æœ¬æ„å»ºäº†ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ã€‚*

---

#### `String(const char *str)`

**Signature**

```cpp
String(const char *str);
```

**Synopsis**  
ä»ä»¥ç©ºå­—ç¬¦ç»“å°¾çš„ C å­—ç¬¦ä¸²åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²ã€‚

**Parameters**

* `str` â€“ æŒ‡å‘ä»¥ç©ºå­—ç¬¦ç»“å°¾çš„ UTF-8 ç¼–ç å­—èŠ‚åºåˆ—çš„æŒ‡é’ˆã€‚

**Return value**

* *(æ„é€ å‡½æ•°ï¼›ä¸é€‚ç”¨)*

**In Depth**

è¯¥æ„é€ å‡½æ•°æ˜¯ä»åŸå§‹ C é£æ ¼å­—ç¬¦ä¸²è½¬æ¢åˆ° `attoboy::String` çš„ä¸»è¦æ¡¥æ¢ã€‚å†…å®¹ä¼šè¢«æ‹·è´åˆ°å†…éƒ¨è¡¨ç¤ºä¸­ï¼Œå› æ­¤ä¹‹åä½ å¯ä»¥å®‰å…¨åœ°ä¿®æ”¹æˆ–é‡Šæ”¾åŸå§‹ç¼“å†²åŒºã€‚

å…³é”®ç‚¹ï¼š

* è¾“å…¥å¿…é¡»æ˜¯**ä»¥ç©ºå­—ç¬¦ç»“å°¾**çš„ã€‚
* å­—èŠ‚è¢«è§£é‡Šä¸º UTF-8ã€‚å¦‚æœå­—èŠ‚åºåˆ—ä¸æ˜¯æœ‰æ•ˆçš„ UTF-8ï¼Œåˆ™åŸºäºå­—ç¬¦çš„æ“ä½œå¯èƒ½ä¼šå‡ºç°æ„å¤–è¡Œä¸ºã€‚
* åœ¨å¤šæ•°è®¾è®¡ä¸­ï¼Œå°† `nullptr` ä½œä¸ºè¾“å…¥ä¼šè¢«è§†ä¸ºä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼›ä¸ºé¿å…æ­§ä¹‰ï¼Œåº”å°½é‡ä¼ å…¥æœ‰æ•ˆæŒ‡é’ˆã€‚

**Example**

```cpp
const char *raw = "Hello, UTF-8 ğŸŒ";
String s(raw);
int chars = s.length();      // character count (including emoji)
int bytes = s.byteLength();  // raw byte count
```

*æ­¤ç¤ºä¾‹å°† C é£æ ¼ UTF-8 å­—ç¬¦ä¸²å°è£…ä¸ºä¸å¯å˜çš„ `String`ï¼Œå¹¶å¯¹æ¯”äº†å­—ç¬¦æ•°ä¸å­—èŠ‚æ•°ã€‚*

---

#### `String(bool value)`

**Signature**

```cpp
String(bool value);
```

**Synopsis**  
ä»å¸ƒå°”å€¼åˆ›å»ºå­—ç¬¦ä¸²ï¼ˆ"true" æˆ– "false"ï¼‰ã€‚

**Parameters**

* `value` â€“ è¦è½¬æ¢çš„å¸ƒå°”å€¼ã€‚

**Return value**

* *(æ„é€ å‡½æ•°ï¼›ä¸é€‚ç”¨)*

**In Depth**

è¯¥æ„é€ å‡½æ•°å°†å¸ƒå°”å€¼è½¬æ¢ä¸ºæ–‡å­— `"true"` æˆ– `"false"`ï¼ˆå…¨å°å†™ï¼‰ã€‚åœ¨æ—¥å¿—è®°å½•ã€æ¶ˆæ¯æ ¼å¼åŒ–æˆ–æ„é€  JSON æ—¶å¯é¿å…æ‰‹åŠ¨æ‹¼æ¥å­—ç¬¦ä¸²ã€‚

**Example**

```cpp
bool enabled = true;
String text(enabled);   // "true"
String msg = String("Feature enabled = ") + text;
```

*æ­¤ç¤ºä¾‹å°†å¸ƒå°”æ ‡å¿—è½¬æ¢ä¸ºå¯è¯»å­—ç¬¦ä¸²ï¼Œå¹¶æ‹¼æ¥è¿›ä¸€æ¡æ¶ˆæ¯ã€‚*

---

#### `String(char value)`

**Signature**

```cpp
String(char value);
```

**Synopsis**  
ä»ä¸€ä¸ªå­—ç¬¦åˆ›å»ºå­—ç¬¦ä¸²ã€‚

**Parameters**

* `value` â€“ ä½œä¸ºå•å­—ç¬¦å­—ç¬¦ä¸²å­˜å‚¨çš„å•å­—èŠ‚å€¼ã€‚

**Return value**

* *(æ„é€ å‡½æ•°ï¼›ä¸é€‚ç”¨)*

**In Depth**

è¯¥æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªæ°å¥½åŒ…å«ä¸€ä¸ªå­—èŠ‚çš„ `String`ã€‚å¯¹äº ASCII å­—ç¬¦ï¼Œè¿™å¯¹åº”ä¸€ä¸ªå­—ç¬¦ã€‚å¯¹äºé€šç”¨ Unicode æ–‡æœ¬ï¼Œæ›´æ¨èä» UTF-8 ç¼–ç çš„ `const char *` æ„é€ ï¼Œæˆ–é€šè¿‡ç»„åˆå·²æœ‰çš„ `String` å®ä¾‹æ¥æ„å»ºã€‚

**Example**

```cpp
String exclamation('!');
String word("Go");
String sentence = word + exclamation;  // "Go!"
```

*æ­¤ç¤ºä¾‹å…ˆæ„å»ºä¸€ä¸ªå•è¯ï¼Œç„¶åå°†ç”± `char` åˆ›å»ºçš„å•å­—ç¬¦ `String` è¿½åŠ åˆ°å…¶åã€‚*

---

#### `String(int value)`

**Signature**

```cpp
String(int value);
```

**Synopsis**  
ä»æ•´æ•°åˆ›å»ºå­—ç¬¦ä¸²ã€‚

**Parameters**

* `value` â€“ è¦è½¬æ¢çš„ 32 ä½æ•´æ•°ã€‚

**Return value**

* *(æ„é€ å‡½æ•°ï¼›ä¸é€‚ç”¨)*

**In Depth**

è¯¥æ„é€ å‡½æ•°å°†æ•´æ•°è½¬æ¢ä¸ºåè¿›åˆ¶è¡¨ç¤ºï¼ˆå¦‚ `42` â†’ `"42"`ï¼Œ`-5` â†’ `"-5"`ï¼‰ã€‚ä¸ä¼šåŒ…å«åƒä½åˆ†éš”ç¬¦æˆ–å…¶ä»–é¢å¤–æ ¼å¼ã€‚

**Example**

```cpp
int score = 42;
String scoreText(score);  // "42"
String label = String("Score: ") + scoreText;  // "Score: 42"
```

*æ­¤ç¤ºä¾‹å°†æ•´æ•°åˆ†æ•°è½¬æ¢ä¸ºæ–‡æœ¬ï¼Œå¹¶æ‹¼æ¥æˆä¸€ä¸ªæ ‡ç­¾ã€‚*

---

#### `String(long long value)`

**Signature**

```cpp
String(long long value);
```

**Synopsis**  
ä» 64 ä½æ•´æ•°åˆ›å»ºå­—ç¬¦ä¸²ã€‚

**Parameters**

* `value` â€“ è¦è½¬æ¢çš„ 64 ä½æ•´æ•°ã€‚

**Return value**

* *(æ„é€ å‡½æ•°ï¼›ä¸é€‚ç”¨)*

**In Depth**

è¡Œä¸ºç±»ä¼¼äº `String(int)`ï¼Œä½†æ”¯æŒ `long long` çš„å®Œæ•´å–å€¼èŒƒå›´ã€‚å½“éœ€è¦å°†è¾ƒå¤§çš„è®¡æ•°å™¨ã€æ—¶é—´æˆ³æˆ–å¯èƒ½è¶…å‡º 32 ä½æ•´æ•°èŒƒå›´çš„å¤§å°è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ—¶ï¼Œåº”ä½¿ç”¨æ­¤æ„é€ å‡½æ•°ã€‚

**Example**

```cpp
long long totalBytes = 1048576;
String bytesText(totalBytes);  // "1048576"
```

*æ­¤ç¤ºä¾‹å°† 64 ä½å€¼ï¼ˆä¾‹å¦‚å­—èŠ‚å¤§å°ï¼‰è½¬æ¢ä¸ºæ–‡æœ¬ä»¥ä¾¿æŠ¥å‘Šã€‚*

---

#### `String(float value)`

**Signature**

```cpp
String(float value);
```

**Synopsis**  
ä»æµ®ç‚¹æ•°åˆ›å»ºå­—ç¬¦ä¸²ã€‚

**Parameters**

* `value` â€“ è¦è½¬æ¢çš„æµ®ç‚¹å€¼ã€‚

**Return value**

* *(æ„é€ å‡½æ•°ï¼›ä¸é€‚ç”¨)*

**In Depth**

å°† `float` è½¬æ¢ä¸ºåè¿›åˆ¶æ–‡æœ¬è¡¨ç¤ºã€‚ç¡®åˆ‡çš„æ ¼å¼ï¼ˆå°æ•°ä½æ•°ã€å°¾éšé›¶ï¼‰éµå¾ªåº“å†…éƒ¨çš„æ ¼å¼åŒ–è§„åˆ™ï¼Œä½†å¯é¢„æœŸä¸ºå¸¸è§çš„å¯è¯»åè¿›åˆ¶å­—ç¬¦ä¸²ã€‚

**Example**

```cpp
float ratio = 0.5f;
String text(ratio);  // e.g., "0.5"
String label = String("Ratio: ") + text;
```

*æ­¤ç¤ºä¾‹å°†æµ®ç‚¹å€¼è½¬æ¢ä¸ºç®€å•å­—ç¬¦ä¸²ã€‚*

---

#### `String(const List &list)`

**Signature**

```cpp
String(const List &list);
```

**Synopsis**  
ä»åˆ—è¡¨åˆ›å»º JSON æ•°ç»„å­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚ [1,"a",true]ï¼‰ã€‚

**Parameters**

* `list` â€“ å…¶å…ƒç´ å°†è¢«åºåˆ—åŒ–ä¸º JSON çš„ `List`ã€‚

**Return value**

* *(æ„é€ å‡½æ•°ï¼›ä¸é€‚ç”¨)*

**In Depth**

è¯¥æ„é€ å‡½æ•°å°† `List` æ¸²æŸ“ä¸º JSON æ•°ç»„ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ æ ¹æ®å…¶ç±»å‹è¿›è¡Œåºåˆ—åŒ–ï¼š

* æ•°å­—ä½œä¸º JSON æ•°å­—ã€‚
* å¸ƒå°”å€¼ä½œä¸º `true`/`false`ã€‚
* å­—ç¬¦ä¸²ä½œä¸ºå¸¦å¼•å·ä¸”è½¬ä¹‰çš„ JSON å­—ç¬¦ä¸²ã€‚
* åµŒå¥—çš„ `List`ã€`Map` å’Œ `Set` å€¼ä¼šæˆä¸ºåµŒå¥—æ•°ç»„/å¯¹è±¡ã€‚

è¿™åœ¨è®°å½•ç»“æ„åŒ–æ•°æ®æˆ–å‘é€ç®€å• JSON è½½è·æ—¶ç‰¹åˆ«æœ‰ç”¨ï¼Œæ— éœ€å®Œæ•´ JSON åº“ã€‚

**Example**

```cpp
List values;
values.append(1).append("two").append(true);

String json(values);  // e.g., "[1,\"two\",true]"
```

*æ­¤ç¤ºä¾‹å°†åŒ…å«å¤šç§ç±»å‹çš„åˆ—è¡¨è½¬æ¢ä¸º JSON æ•°ç»„å­—ç¬¦ä¸²ã€‚*

---

#### `String(const Map &map)`

**Signature**

```cpp
String(const Map &map);
```

**Synopsis**  
ä»æ˜ å°„åˆ›å»º JSON å¯¹è±¡å­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚ {"k":"v"}ï¼‰ã€‚

**Parameters**

* `map` â€“ å…¶é”®å€¼å¯¹å°†è¢«åºåˆ—åŒ–ä¸º JSON çš„ `Map`ã€‚

**Return value**

* *(æ„é€ å‡½æ•°ï¼›ä¸é€‚ç”¨)*

**In Depth**

è¯¥æ„é€ å‡½æ•°å°† `Map` æ¸²æŸ“ä¸º JSON å¯¹è±¡ã€‚é”®å’Œå€¼éƒ½ä¼šè¢«è½¬æ¢ä¸º JSONï¼›é”®é€šå¸¸ä¸ºå­—ç¬¦ä¸²ï¼Œä½†å…¶ä»–ç±»å‹ä¼šåœ¨éœ€è¦æ—¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚

é”®åœ¨ map ä¸­å¿…é¡»å”¯ä¸€ï¼›ç”Ÿæˆçš„ JSON ä½¿ç”¨è¿™äº›é”®ä½œä¸ºå¯¹è±¡å±æ€§åã€‚

**Example**

```cpp
Map user;
user.put("name", "Alice").put("age", 30);

String json(user);  // e.g., "{\"name\":\"Alice\",\"age\":30}"
```

*æ­¤ç¤ºä¾‹å°†å±æ€§æ˜ å°„è½¬æ¢ä¸º JSON å¯¹è±¡å­—ç¬¦ä¸²ã€‚*

---

#### `String(const Set &set)`

**Signature**

```cpp
String(const Set &set);
```

**Synopsis**  
ä»é›†åˆåˆ›å»º JSON æ•°ç»„å­—ç¬¦ä¸²ã€‚

**Parameters**

* `set` â€“ å…¶å€¼å°†è¢«åºåˆ—åŒ–ä¸º JSON çš„ `Set`ã€‚

**Return value**

* *(æ„é€ å‡½æ•°ï¼›ä¸é€‚ç”¨)*

**In Depth**

è¯¥æ„é€ å‡½æ•°å°† `Set` æ¸²æŸ“ä¸º JSON æ•°ç»„å­—ç¬¦ä¸²ï¼Œä¸ `String(const List &list)` ç±»ä¼¼ã€‚ç”±äºé›†åˆæ˜¯æ— åºçš„ï¼ŒJSON æ•°ç»„ä¸­å…ƒç´ çš„é¡ºåºä¸ä½œä¿è¯ã€‚

é‡å¤å€¼å·²ç”± `Set` è‡ªèº«å»é‡ã€‚

**Example**

```cpp
Set tags;
tags.put("red").put("blue").put("green");

String json(tags);  // e.g., "[\"red\",\"blue\",\"green\"]"
```

*æ­¤ç¤ºä¾‹å°†å­—ç¬¦ä¸²é›†åˆè½¬æ¢ä¸º JSON æ•°ç»„å­—ç¬¦ä¸²ã€‚*

---

#### `template <typename T, typename U, typename... Args> String(const T &first, const U &second, const Args &...rest)`

**Signature**

```cpp
template <typename T, typename U, typename... Args>
String(const T &first, const U &second, const Args &...rest)
    : String(String(first) + String(second) + String(rest...)) {}
```

**Synopsis**  
å°†å¤šä¸ªå€¼æ‹¼æ¥ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ã€‚

**Parameters**

* `first` â€“ è¦è½¬æ¢ä¸º `String` çš„ç¬¬ä¸€ä¸ªå€¼ã€‚
* `second` â€“ è¦è½¬æ¢ä¸º `String` çš„ç¬¬äºŒä¸ªå€¼ã€‚
* `rest` â€“ é›¶ä¸ªæˆ–å¤šä¸ªé¢å¤–å€¼ï¼Œå°†è¢«è½¬æ¢å¹¶ä¾æ¬¡è¿½åŠ ã€‚

æ¯ä¸ªå‚æ•°éƒ½å¯ä»¥æ˜¯ä»»ä½•å¯æ„é€ ä¸º `String` çš„ç±»å‹ï¼Œä¾‹å¦‚ `const char *`ã€`String`ã€`int`ã€`bool`ã€`List` ç­‰ã€‚

**Return value**

* *(æ„é€ å‡½æ•°ï¼›ä¸é€‚ç”¨)*

**In Depth**

è¿™ä¸ªå¯å˜å‚æ•°æ„é€ å‡½æ•°æä¾›äº†ä¸€ç§ç®€æ´æ–¹å¼ï¼Œå¯ä»ä¸€ç»„å¼‚æ„å€¼æ„å»ºä¸€ä¸ª `String`ã€‚å†…éƒ¨å®ç°ä¸­ï¼Œæ¯ä¸ªå‚æ•°éƒ½ä¼šè¢«è½¬æ¢ä¸º `String`ï¼Œå¹¶æŒ‰é¡ºåºæ‹¼æ¥ã€‚

ä½ å¯ä»¥å°†å…¶ç†è§£ä¸ºï¼š

```cpp
String(String(first)) + String(second) + String(rest)...
```

è¿™åœ¨æ„å»ºæ¶ˆæ¯æˆ–æ—¥å¿—æ—¶å°¤å…¶æ–¹ä¾¿ï¼Œé¿å…æ‰‹åŠ¨ç”¨ `+` é“¾å¼æ‹¼æ¥ã€‚

**Example**

```cpp
int id = 7;
String status = "OK";

String line("Task #", id, " status: ", status);
// e.g., "Task #7 status: OK"
```

*æ­¤ç¤ºä¾‹ä½¿ç”¨å¯å˜å‚æ•°æ„é€ å‡½æ•°ï¼Œä»å­—é¢é‡ã€æ•´æ•°å’Œå…¶ä»–å­—ç¬¦ä¸²æ··åˆæ„å»ºä¸€æ¡æ¶ˆæ¯ã€‚*

---

#### `String(const String &other)`

**Signature**

```cpp
String(const String &other);
```

**Synopsis**  
åˆ›å»ºå¦ä¸€ä¸ªå­—ç¬¦ä¸²çš„å‰¯æœ¬ã€‚

**Parameters**

* `other` â€“ è¦æ‹·è´çš„ç°æœ‰ `String`ã€‚

**Return value**

* *(æ„é€ å‡½æ•°ï¼›ä¸é€‚ç”¨)*

**In Depth**

æ‹·è´æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªä¸ `other` æ‹¥æœ‰ç›¸åŒå†…å®¹çš„æ–° `String`ã€‚ç”±äº `String` æ˜¯ä¸å¯å˜çš„ï¼Œæ‹·è´åœ¨æ¦‚å¿µä¸Šæ˜¯ç‹¬ç«‹çš„ï¼Œå¹¶ä¸”å®‰å…¨å…±äº«ã€‚å†…éƒ¨å®ç°å¯ä»¥ä¸ºæé«˜æ•ˆç‡è€Œå…±äº«å­˜å‚¨ã€‚

**Example**

```cpp
String original("hello");
String copy(original);
// both represent "hello"
```

*æ­¤ç¤ºä¾‹å±•ç¤ºäº†å­—ç¬¦ä¸²å€¼çš„æ‹·è´ã€‚*

---

#### `~String()`

**Signature**

```cpp
~String();
```

**Synopsis**  
é”€æ¯å­—ç¬¦ä¸²å¹¶é‡Šæ”¾å†…å­˜ã€‚

**Parameters**

* *(æ— )*

**Return value**

* *(ææ„å‡½æ•°ï¼›ä¸é€‚ç”¨)*

**In Depth**

å½“ `String` è¶…å‡ºä½œç”¨åŸŸæˆ–è¢«é”€æ¯æ—¶ï¼Œå…¶ææ„å‡½æ•°ä¼šé‡Šæ”¾æ‰€æœ‰å†…éƒ¨èµ„æºï¼ˆä¾‹å¦‚å †åˆ†é…çš„ç¼“å†²åŒºï¼‰ã€‚ç”±äº `String` é‡‡ç”¨ RAIIï¼Œä½ æ— éœ€æ‰‹åŠ¨é‡Šæ”¾å†…å­˜ã€‚

**Example**

```cpp
{
  String temp("temporary");
  // temp is valid here
}
// temp is destroyed here; memory is released automatically
```

*æ­¤ç¤ºä¾‹å±•ç¤ºäº† `String` åœ¨ç¦»å¼€ä½œç”¨åŸŸæ—¶çš„è‡ªåŠ¨æ¸…ç†ã€‚*

---

#### `static String FromCStr(const char *data, int size, const String &encoding = "utf-8")`

**Signature**

```cpp
static String FromCStr(const char *data, int size, const String &encoding = "utf-8");
```

**Synopsis**  
ä»å…·æœ‰æŒ‡å®šé•¿åº¦çš„åŸå§‹å­—èŠ‚åˆ›å»ºå­—ç¬¦ä¸²ï¼ˆä¸è¦æ±‚ä»¥ç©ºå­—ç¬¦ç»“å°¾ï¼‰ã€‚ç¼–ç é»˜è®¤ä¸º "utf-8"ã€‚

**Parameters**

* `data` â€“ æŒ‡å‘åŒ…å«æŒ‡å®š `encoding` ç¼–ç å­—èŠ‚çš„ç¼“å†²åŒºçš„æŒ‡é’ˆã€‚
* `size` â€“ ä» `data` ä¸­æ‹·è´çš„å­—èŠ‚æ•°ã€‚
* `encoding` â€“ `data` æ‰€ä½¿ç”¨å­—ç¬¦ç¼–ç çš„åç§°ã€‚é»˜è®¤ä¸º `"utf-8"`ã€‚è¿™äº›å­—èŠ‚å°†è¢«è½¬æ¢ä¸º `String` çš„å†…éƒ¨ UTF-8 è¡¨ç¤ºã€‚

**Return value**

* ä¸€ä¸ª `String`ï¼ŒåŒ…å«ä» `data` ä¸­å‰ `size` ä¸ªå­—èŠ‚è½¬æ¢å¾—åˆ°çš„æ–‡æœ¬ã€‚

**In Depth**

ä¸ `const char *` æ„é€ å‡½æ•°ä¸åŒï¼Œè¿™ä¸ªé™æ€å‡½æ•°**ä¸**è¦æ±‚æºç¼“å†²åŒºä»¥ `'\0'` ç»“å°¾ã€‚å®ƒéå¸¸é€‚åˆåœ¨ä»¥ä¸‹åœºæ™¯ä½¿ç”¨ï¼š

* ä½ æœ‰ä¸€ä¸ªå¯èƒ½åŒ…å«åµŒå…¥ç©ºå­—èŠ‚çš„ç¼“å†²åŒºã€‚
* ä½ æ­£åœ¨å¤„ç†ä¸€ä¸ªæ›´å¤§ç¼“å†²åŒºä¸­çš„å­åŒºé—´ï¼Œè¿™ä¸ªå­åŒºé—´æœ¬èº«å¹¶æœªå•ç‹¬ä»¥ç©ºå­—ç¬¦ç»ˆæ­¢ã€‚
* ä½ æ¥æ”¶åˆ°äº†æŸç§å·²çŸ¥ç¼–ç çš„æ•°æ®ï¼Œéœ€è¦å°†å…¶è½¬æ¢ä¸ºå†…éƒ¨çš„ UTF-8 è¡¨ç¤ºã€‚

`encoding` å‚æ•°ç”¨äºæè¿°è¾“å…¥å­—èŠ‚åº”å¦‚ä½•è§£é‡Šã€‚çœç•¥æ—¶ï¼Œå‡å®šå­—èŠ‚å·²ç»æ˜¯ UTF-8ã€‚å¦‚æœä½ æä¾›å…¶ä»–ç¼–ç åï¼Œä¾‹å¦‚ `"ansi"` æˆ– `"cp1252"`ï¼Œå‡½æ•°ä¼šå°è¯•ä»è¯¥ç¼–ç è½¬æ¢ä¸º UTF-8ã€‚å¦‚æœè¾“å…¥å­—èŠ‚ä¸æ˜¯ç»™å®šç¼–ç ä¸‹çš„æœ‰æ•ˆæ•°æ®ï¼Œå…¶è¡Œä¸ºå–å†³äºåº•å±‚è½¬æ¢å®ç°ï¼ˆä¾‹å¦‚ï¼Œå¯èƒ½ç”¨æ›¿ä»£å­—ç¬¦å–ä»£éæ³•åºåˆ—ï¼Œæˆ–è½¬æ¢å¤±è´¥ï¼‰ã€‚

å½“ä½ è®¡åˆ’ä½¿ç”¨ `length()`ã€`substring()` æˆ– `at()` ç­‰åŸºäºå­—ç¬¦çš„æ“ä½œæ—¶ï¼Œåº”ç¡®ä¿ï¼š

* `size` å’Œ `encoding` æ‰€æè¿°çš„æ˜¯å®Œæ•´å­—ç¬¦ï¼ˆä¸è¦åˆ‡æ–­å¤šå­—èŠ‚ç¼–ç å•å…ƒåºåˆ—ï¼‰ã€‚
* æºç¼“å†²åŒºç¡®å®åŒ…å«æŒ‡å®šç¼–ç çš„æ–‡æœ¬ã€‚

**Example**

```cpp
const char raw[] = "Hello, world!";
String partial = String::FromCStr(raw, 5);  // "Hello"

// Explicitly specifying encoding (input already in UTF-8)
String utf8 = String::FromCStr(raw, sizeof(raw) - 1, "utf-8");
```
*æ­¤ç¤ºä¾‹ä» C é£æ ¼ç¼“å†²åŒºçš„å‰ 5 ä¸ªå­—èŠ‚æ„å»ºäº†ä¸€ä¸ª `String`ï¼Œä»¥åŠä¸€ä¸ªæ˜¾å¼æŒ‡å®š UTF-8 ç¼–ç çš„å®Œæ•´ç‰ˆæœ¬ã€‚*

---

#### `String &operator=(const String &other)`

**Signature**

```cpp
String &operator=(const String &other);
```

**Synopsis**  
å°†å¦ä¸€ä¸ªå­—ç¬¦ä¸²èµ‹å€¼ç»™æ­¤å­—ç¬¦ä¸²ã€‚

**Parameters**

* `other` â€“ å…¶å€¼å°†è¢«èµ‹ç»™æœ¬å¯¹è±¡çš„å­—ç¬¦ä¸²ã€‚

**Return value**

* å¯¹ `*this` çš„å¼•ç”¨ï¼Œä»¥ä¾¿è¿›è¡Œèµ‹å€¼é“¾å¼è°ƒç”¨ã€‚

**In Depth**

æ‹·è´èµ‹å€¼è¿ç®—ç¬¦ä¼šç”¨ `other` çš„å†…å®¹æ›¿æ¢å·¦ä¾§å¯¹è±¡çš„å†…å®¹ã€‚ç”±äº `String` æ˜¯ä¸å¯å˜çš„ï¼Œè¯¥æ“ä½œæœ¬è´¨ä¸Šåªæ˜¯è®©å˜é‡å¼•ç”¨ä¸ `other` ç›¸åŒçš„é€»è¾‘å€¼ã€‚

è‡ªèµ‹å€¼æ˜¯å®‰å…¨çš„ï¼›å…¸å‹å®ç°ä¼šé«˜æ•ˆåœ°æ£€æµ‹å¹¶å¤„ç†è¿™ç§æƒ…å†µã€‚

**Example**

```cpp
String name("Alice");
String other("Bob");

name = other;  // name now represents "Bob"
```

*æ­¤ç¤ºä¾‹å°†ä¸€ä¸ª `String` å˜é‡é‡æ–°èµ‹å€¼ä¸ºä¸å¦ä¸€ä¸ªå˜é‡å…±äº«ç›¸åŒæ–‡æœ¬ã€‚*

---

#### `int length() const`

**Signature**

```cpp
int length() const;
```

**Synopsis**  
è¿”å›å­—ç¬¦ä¸²ä¸­çš„ UTF-8 å­—ç¬¦æ•°ã€‚

**Parameters**

* *(æ— )*

**Return value**

* å­—ç¬¦ä¸²ä¸­ Unicode ç ç‚¹çš„æ•°é‡ï¼ˆå¯èƒ½å°äº `byteLength()`ï¼‰ã€‚

**In Depth**

`length()` ç»Ÿè®¡çš„æ˜¯**å­—ç¬¦**æ•°é‡ï¼Œè€Œä¸æ˜¯å­—èŠ‚æ•°é‡ã€‚å¯¹äºçº¯ ASCII æ–‡æœ¬ï¼Œ`length()` ä¸ `byteLength()` ç›¸ç­‰ã€‚å¯¹äºé ASCII å­—ç¬¦ï¼ˆå¦‚ emoji æˆ–éæ‹‰ä¸æ–‡å­—ï¼‰ï¼Œå•ä¸ªå­—ç¬¦å¯èƒ½ç”±å¤šä¸ªå­—èŠ‚å­˜å‚¨ï¼Œå› æ­¤ `byteLength()` å¯èƒ½æ›´å¤§ã€‚

å½“ä½ å…³å¿ƒç”¨æˆ·å¯è§çš„å­—ç¬¦ï¼ˆå…‰æ ‡ä½ç½®ã€â€œæœ€å¤š 80 ä¸ªå­—ç¬¦â€ä¹‹ç±»çš„æ ¡éªŒè§„åˆ™ç­‰ï¼‰æ—¶ï¼Œåº”ä½¿ç”¨ `length()`ã€‚

**Example**

```cpp
String ascii("hello");
String unicode("ğŸŒ");  // earth emoji

int la = ascii.length();    // 5
int ba = ascii.byteLength(); // 5

int lu = unicode.length();   // 1 (one character)
int bu = unicode.byteLength(); // > 1 bytes
```

*æ­¤ç¤ºä¾‹å¯¹æ¯”äº† ASCII ä¸ Unicode æ–‡æœ¬çš„å­—ç¬¦è®¡æ•°å’Œå­—èŠ‚è®¡æ•°ã€‚*

---

#### `int byteLength() const`

**Signature**

```cpp
int byteLength() const;
```

**Synopsis**  
è¿”å›å­—ç¬¦ä¸²ä¸­çš„å­—èŠ‚æ•°ã€‚

**Parameters**

* *(æ— )*

**Return value**

* å†…éƒ¨ UTF-8 è¡¨ç¤ºä¸­çš„å­—èŠ‚æ•°ï¼ˆä¸åŒ…æ‹¬ç»“å°¾çš„ç©ºå­—ç¬¦ï¼‰ã€‚

**In Depth**

`byteLength()` å‘Šè¯‰ä½ å­—ç¬¦ä¸²å†…å®¹çš„åŸå§‹å­˜å‚¨å¤§å°ã€‚å¯åœ¨ä»¥ä¸‹åœºæ™¯ä½¿ç”¨ï¼š

* å†™å…¥éœ€è¦å­—èŠ‚è®¡æ•°çš„äºŒè¿›åˆ¶åè®®ã€‚
* ä¸ºä¿å­˜ UTF-8 æ•°æ®çš„æ‹·è´åˆ†é…ç¼“å†²åŒºã€‚

å¦‚æœå­—ç¬¦ä¸²åŒ…å«é ASCII å­—ç¬¦ï¼Œ`byteLength()` å¯èƒ½å¤§äº `length()`ã€‚

**Example**

```cpp
String s("Hello, ğŸŒ");
int bytes = s.byteLength();  // raw UTF-8 bytes
```

*æ­¤ç¤ºä¾‹è·å– UTF-8 æ–‡æœ¬çš„å­—èŠ‚é•¿åº¦ã€‚*

---

#### `bool isEmpty() const`

**Signature**

```cpp
bool isEmpty() const;
```

**Synopsis**  
å¦‚æœå­—ç¬¦ä¸²ä¸ºç©ºåˆ™è¿”å› trueã€‚

**Parameters**

* *(æ— )*

**Return value**

* è‹¥å­—ç¬¦ä¸²ä¸åŒ…å«ä»»ä½•å­—ç¬¦åˆ™è¿”å› `true`ï¼Œå¦åˆ™è¿”å› `false`ã€‚

**In Depth**

è¿™æ˜¯ä¸€ä¸ªæ–¹ä¾¿å‡½æ•°ï¼Œç­‰ä»·äº `length() == 0`ã€‚åœ¨æ£€æŸ¥è¾“å…¥æ˜¯å¦ä¸ºç©ºæˆ–å¯é€‰å­—æ®µæ˜¯å¦å­˜åœ¨æ—¶ï¼Œå®ƒé€šå¸¸æ›´æ¸…æ™°ã€æ›´å…·è¡¨è¾¾åŠ›ã€‚

**Example**

```cpp
String name;

if (name.isEmpty()) {
  name = "Anonymous";
}
```

*æ­¤ç¤ºä¾‹åœ¨å­—ç¬¦ä¸²ä¸ºç©ºæ—¶ä¸ºå…¶èµ‹äºˆé»˜è®¤åç§°ã€‚*

---

#### `const char *c_str() const`

**Signature**

```cpp
const char *c_str() const;
```

**Synopsis**  
è¿”å›æŒ‡å‘ä»¥ç©ºå­—ç¬¦ç»“å°¾çš„ C å­—ç¬¦ä¸²çš„æŒ‡é’ˆã€‚

**Parameters**

* *(æ— )*

**Return value**

* æŒ‡å‘ç”± `String` æ‹¥æœ‰çš„ã€ä»¥ç©ºå­—ç¬¦ç»“å°¾çš„ UTF-8 å­—èŠ‚åºåˆ—çš„æŒ‡é’ˆã€‚

**In Depth**

è¯¥å‡½æ•°æš´éœ²å†…éƒ¨æ•°æ®çš„åªè¯» C é£æ ¼å­—ç¬¦ä¸²è§†å›¾ã€‚è¿”å›çš„æŒ‡é’ˆï¼š

* åœ¨ `String` å¯¹è±¡ä»ç„¶å­˜æ´»æœŸé—´ä¿æŒæœ‰æ•ˆã€‚
* ä¸åº”è¢«ä¿®æ”¹ã€‚
* å¯ä»¥ä¼ é€’ç»™æ¥å— `const char *` çš„ C APIã€‚

ç”±äº `String` æ˜¯ä¸å¯å˜çš„ï¼Œå¯¹åŒä¸€å¯¹è±¡è°ƒç”¨å…¶ä»–æ–¹æ³•ä¸ä¼šæ”¹å˜è¯¥ç¼“å†²åŒºã€‚

**Example**

```cpp
String s("Hello");
const char *p = s.c_str();
// p can be passed to C-style APIs that expect a const char*.
```

*æ­¤ç¤ºä¾‹è·å– C é£æ ¼æŒ‡é’ˆä»¥ä¸ä¸è®¤è¯† `String` çš„ API äº’æ“ä½œã€‚*

---

#### `char *c_str_allocated(const String &encoding = "utf-8") const`

**Signature**

```cpp
char *c_str_allocated(const String &encoding = "utf-8") const;
```

**Synopsis**  
è¿”å›ä¸€ä¸ªåœ¨å †ä¸Šåˆ†é…çš„ã€ä½¿ç”¨æŒ‡å®šç¼–ç çš„ C å­—ç¬¦ä¸²ã€‚è°ƒç”¨æ–¹è´Ÿè´£ä½¿ç”¨ Free() é‡Šæ”¾è¯¥æŒ‡é’ˆã€‚ç¼–ç é»˜è®¤ä¸º "utf-8" ä»¥ç”Ÿæˆ UTF-8 è¾“å‡ºã€‚

**Parameters**

* `encoding` â€“ æœŸæœ›è¾“å‡ºç¼–ç çš„åç§°ã€‚é»˜è®¤ä¸º `"utf-8"`ï¼Œè¡¨ç¤ºç”Ÿæˆ UTF-8 è¾“å‡ºã€‚

**Return value**

* æŒ‡å‘æ–°åˆ†é…çš„ã€ä»¥ç©ºå­—ç¬¦ç»“å°¾çš„ C å­—ç¬¦ä¸²çš„æŒ‡é’ˆï¼Œå…¶ä¸­åŒ…å«æŒ‰è¯·æ±‚ç¼–ç çš„æ–‡æœ¬ã€‚ä½ *å¿…é¡»*åœ¨ä¸å†éœ€è¦æ—¶è°ƒç”¨ `Free()` é‡Šæ”¾è¯¥å†…å­˜ã€‚

**In Depth**

ä¸æš´éœ² `String` å†…éƒ¨ç¼“å†²åŒºåªè¯»æŒ‡é’ˆçš„ `c_str()` ä¸åŒï¼Œ`c_str_allocated()` ä¼šåˆ›å»ºä¸€ä¸ª**å•ç‹¬çš„å †åˆ†é…å‰¯æœ¬**ä½œä¸º C é£æ ¼å­—ç¬¦ä¸²ã€‚å½“ä½ éœ€è¦å°†ç¼“å†²åŒºçš„æ‰€æœ‰æƒäº¤ç»™å¯èƒ½åœ¨ `String` å¯¹è±¡ç”Ÿå‘½å‘¨æœŸä¹‹å¤–æŒæœ‰ `char *` çš„ API æ—¶ï¼Œè¿™éå¸¸æœ‰ç”¨ã€‚

å…³é”®ç‚¹ï¼š

* è¿”å›çš„æŒ‡é’ˆä½¿ç”¨ attoboy è‡ªèº«çš„åˆ†é…æœºåˆ¶è¿›è¡Œåˆ†é…ã€‚
* ä½ **å¿…é¡»**åœ¨ä¸å†éœ€è¦è¯¥ç¼“å†²åŒºæ—¶è°ƒç”¨ `Free(ptr)` é‡Šæ”¾å®ƒã€‚
* `encoding` å‚æ•°æ§åˆ¶å†…éƒ¨ UTF-8 æ–‡æœ¬å¦‚ä½•è½¬æ¢ä¸ºè¾“å‡ºå­—èŠ‚ã€‚ä½¿ç”¨é»˜è®¤çš„ `"utf-8"` æ—¶ï¼Œä¼šå¾—åˆ° UTF-8 ç¼–ç çš„ C å­—ç¬¦ä¸²ã€‚å…¶å®ƒç¼–ç åå¯èƒ½å–å†³äºåº•å±‚è½¬æ¢è®¾æ–½çš„æ”¯æŒæƒ…å†µã€‚
* å¦‚æœæŸäº›å­—ç¬¦åœ¨è¯·æ±‚ç¼–ç ä¸­ä¸å¯è¡¨ç¤ºï¼Œè½¬æ¢å¯èƒ½ä¼šç”¨æ›¿ä»£å­—ç¬¦æ›¿æ¢ï¼Œæˆ–å¤±è´¥ï¼Œå…·ä½“å–å†³äºå®ç°ã€‚

ç”±äºæ­¤å‡½æ•°æ—¢è¿›è¡Œåˆ†é…ï¼Œåˆï¼ˆå¯é€‰åœ°ï¼‰æ‰§è¡Œç¼–ç è½¬æ¢ï¼Œå› æ­¤å¯èƒ½æ¯”ç®€å•è°ƒç”¨ `c_str()` æ›´æ˜‚è´µã€‚ä»…åœ¨ä½ ç¡®å®éœ€è¦ç‹¬ç«‹çš„ã€ç”±è°ƒç”¨æ–¹æ‹¥æœ‰çš„ç¼“å†²åŒºæ—¶æ‰ä½¿ç”¨å®ƒã€‚

**Example**

```cpp
String s("Hello, world");

// Get a UTF-8 C string that the caller owns
char *buffer = s.c_str_allocated();

// Use buffer with a C API that stores the pointer
some_c_api_using_string(buffer);

// When finished with the buffer, you MUST free it with Free()
Free(buffer);
```

*æ­¤ç¤ºä¾‹è·å–ä¸€ä¸ªå †åˆ†é…çš„ C å­—ç¬¦ä¸²ï¼Œå°†å…¶ä¼ é€’ç»™ C APIï¼Œå¹¶æœ€ç»ˆä½¿ç”¨ `Free()` æ­£ç¡®é‡Šæ”¾ã€‚*

---

#### `String at(int index) const`

**Signature**

```cpp
String at(int index) const;
```

**Synopsis**  
è¿”å›ç»™å®šç´¢å¼•å¤„çš„å­—ç¬¦ï¼ˆä½œä¸ºå­—ç¬¦ä¸²ï¼‰ã€‚è´Ÿç´¢å¼•ä»æœ«å°¾è®¡æ•°ã€‚

**Parameters**

* `index` â€“ å­—ç¬¦ç´¢å¼•ï¼ˆä» 0 å¼€å§‹ï¼‰ã€‚è´Ÿå€¼è¡¨ç¤ºä»æœ«å°¾å¼€å§‹è®¡æ•°ã€‚

**Return value**

* ä¸€ä¸ª `String`ï¼Œæ°å¥½åŒ…å«ä¸€ä¸ªå­—ç¬¦ï¼ˆä¸€ä¸ª Unicode ç ç‚¹ï¼‰ã€‚

**In Depth**

`at()` è¿”å›ä½ç½® `index` å¤„çš„å­—ç¬¦ï¼Œå¹¶ä»¥æ–°çš„å•å­—ç¬¦å­—ç¬¦ä¸²å½¢å¼ç»™å‡ºã€‚å®ƒéµå®ˆ UTF-8 ç ç‚¹è¾¹ç•Œï¼Œå› æ­¤ä¸ä¼šè¿”å›åŠä¸ªå¤šå­—èŠ‚å­—ç¬¦ã€‚

æ”¯æŒè´Ÿç´¢å¼•ï¼š

* `-1` â€“ æœ€åä¸€ä¸ªå­—ç¬¦ã€‚
* `-2` â€“ å€’æ•°ç¬¬äºŒä¸ªå­—ç¬¦ï¼Œä¾æ­¤ç±»æ¨ã€‚

å¦‚æœ `index` è¶…å‡ºèŒƒå›´ï¼Œå…¶è¡Œä¸ºç”±å®ç°å®šä¹‰ï¼›å®è·µä¸­ä½ åº”åœ¨è°ƒç”¨å‰ç¡®ä¿ `0 <= index < length()`ï¼ˆæˆ–å¯¹åº”çš„è´Ÿç´¢å¼•èŒƒå›´ï¼‰ã€‚

**Example**

```cpp
String text("Hello");
String first = text.at(0);   // "H"
String last  = text.at(-1);  // "o"
```

*æ­¤ç¤ºä¾‹æå–å­—ç¬¦ä¸²çš„é¦–å­—ç¬¦å’Œå°¾å­—ç¬¦ã€‚*

---

#### `String byteAt(int index) const`

**Signature**

```cpp
String byteAt(int index) const;
```

**Synopsis**  
è¿”å›ç»™å®šç´¢å¼•å¤„çš„å•ä¸ªå­—èŠ‚ï¼ˆä½œä¸ºå­—ç¬¦ä¸²ï¼‰ã€‚è´Ÿç´¢å¼•ä»æœ«å°¾è®¡æ•°ã€‚

**Parameters**

* `index` â€“ å­—èŠ‚ç´¢å¼•ï¼ˆä» 0 å¼€å§‹ï¼‰ã€‚è´Ÿå€¼è¡¨ç¤ºä»å­—èŠ‚åºåˆ—æœ«å°¾å¼€å§‹è®¡æ•°ã€‚

**Return value**

* ä¸€ä¸ª `String`ï¼Œæ°å¥½åŒ…å«ä¸€ä¸ªå­—èŠ‚ã€‚

**In Depth**

`byteAt()` æä¾›åŸºäºå­—èŠ‚çš„è®¿é—®ã€‚è¿™ä¸»è¦é€‚ç”¨äºè°ƒè¯•æˆ–åº•å±‚æ“ä½œï¼›å¤§éƒ¨åˆ†æ–‡æœ¬é€»è¾‘åº”ä½¿ç”¨ `at()`ã€‚

å¦‚æœå­—ç¬¦ä¸²åŒ…å«å¤šå­—èŠ‚å­—ç¬¦ï¼Œ`byteAt()` å¯èƒ½è¿”å›é ASCII çš„å»¶ç»­å­—èŠ‚ï¼Œè¯¥å­—èŠ‚æœ¬èº«å¹¶ä¸èƒ½ä½œä¸ºç‹¬ç«‹å­—ç¬¦æœ‰æ„ä¹‰åœ°è§£é‡Šã€‚

**Example**

```cpp
String text("A");
String b0 = text.byteAt(0);   // "A"
```

*æ­¤ç¤ºä¾‹è¯»å–ç®€å• ASCII å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—èŠ‚ã€‚*

---

#### `String substring(int start, int end = -1) const`

**Signature**

```cpp
String substring(int start, int end = -1) const;
```

**Synopsis**  
è¿”å›ä» start åˆ° endï¼ˆæ’ä»–ï¼‰çš„å­ä¸²ã€‚è´Ÿç´¢å¼•ç”¨äºä»æœ«å°¾è®¡æ•°ã€‚

**Parameters**

* `start` â€“ è¦åŒ…å«çš„ç¬¬ä¸€ä¸ªå­—ç¬¦çš„å­—ç¬¦ç´¢å¼•ã€‚å¯ä¸ºè´Ÿæ•°ä»¥ä»æœ«å°¾è®¡æ•°ã€‚
* `end` â€“ è¦åŒ…å«çš„æœ€åä¸€ä¸ªå­—ç¬¦ä¹‹åçš„ä½ç½®ï¼ˆæ’ä»–ï¼‰çš„å­—ç¬¦ç´¢å¼•ã€‚`-1` è¡¨ç¤ºâ€œç›´åˆ°å­—ç¬¦ä¸²æœ«å°¾â€ã€‚

**Return value**

* åŒ…å«æŒ‡å®šå­—ç¬¦èŒƒå›´çš„æ–° `String`ã€‚

**In Depth**

`substring()` åŸºäº**å­—ç¬¦**å·¥ä½œï¼Œè€Œéå­—èŠ‚ã€‚å®ƒéµå®ˆ UTF-8 è¾¹ç•Œï¼Œå› æ­¤ä½ å¯ä»¥å®‰å…¨åœ°æˆªå–åŒ…å«å¤šå­—èŠ‚å­—ç¬¦çš„æ–‡æœ¬ã€‚

å¸¸è§ç”¨æ³•ï¼š

* `substring(0, n)` â€“ å‰ `n` ä¸ªå­—ç¬¦ã€‚
* `substring(0)` æˆ– `substring(0, -1)` â€“ å®Œæ•´æ‹·è´ã€‚
* `substring(-n)` â€“ å `n` ä¸ªå­—ç¬¦ã€‚

ä½ åº”ç¡®ä¿æœ‰æ•ˆåŒºé—´åœ¨ `[0, length()]` èŒƒå›´å†…ã€‚ä¼ å…¥è¶…å‡ºèŒƒå›´çš„ç´¢å¼•ä¼šäº§ç”Ÿç”±å®ç°å®šä¹‰çš„ç»“æœã€‚

**Example**

```cpp
String text("Hello, world");
String hello = text.substring(0, 5);  // "Hello"
String world = text.substring(7);     // "world"
```

*æ­¤ç¤ºä¾‹é€šè¿‡èµ·æ­¢ç´¢å¼•æå–ä¸¤ä¸ªå­ä¸²ã€‚*

---

#### `String byteSubstring(int start, int end = -1) const`

**Signature**

```cpp
String byteSubstring(int start, int end = -1) const;
```

**Synopsis**  
è¿”å›åŸºäºå­—èŠ‚çš„ä» start åˆ° endï¼ˆæ’ä»–ï¼‰çš„å­ä¸²ã€‚

**Parameters**

* `start` â€“ è¦åŒ…å«çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„å­—èŠ‚ç´¢å¼•ã€‚
* `end` â€“ è¦åŒ…å«çš„æœ€åä¸€ä¸ªå­—èŠ‚ä¹‹åçš„ä½ç½®ï¼ˆæ’ä»–ï¼‰çš„å­—èŠ‚ç´¢å¼•ã€‚`-1` è¡¨ç¤ºâ€œç›´åˆ°å­—èŠ‚åºåˆ—æœ«å°¾â€ã€‚

**Return value**

* åŒ…å«æŒ‡å®šå­—èŠ‚èŒƒå›´çš„æ–° `String`ã€‚

**In Depth**

`byteSubstring()` åŸºäºåŸå§‹å­—èŠ‚å·¥ä½œï¼Œè€Œéå­—ç¬¦ã€‚å¦‚æœä½ åœ¨å¤šå­—èŠ‚å­—ç¬¦ä¸­é—´è¿›è¡Œåˆ‡å‰²ï¼Œç»“æœå¯èƒ½åŒ…å«æ— æ•ˆçš„ UTF-8ã€‚ä»…åœ¨ä½ æœ‰æ„è¿›è¡Œå­—èŠ‚çº§æ•°æ®å¤„ç†ï¼ˆä¾‹å¦‚åè®®åˆ†å¸§ã€è‡ªå®šä¹‰ç¼–ç ï¼‰æ—¶ä½¿ç”¨è¯¥å‡½æ•°ã€‚

**Example**

```cpp
String raw("abcdef");
String mid = raw.byteSubstring(2, 4);  // "cd"
```

*æ­¤ç¤ºä¾‹ä»ç®€å• ASCII å­—ç¬¦ä¸²ä¸­æˆªå–ä¸€ä¸ªä¸¤å­—èŠ‚çš„åˆ‡ç‰‡ã€‚*

---

#### `String duplicate() const`

**Signature**

```cpp
String duplicate() const;
```

**Synopsis**  
è¿”å›æ­¤å­—ç¬¦ä¸²çš„å‰¯æœ¬ã€‚

**Parameters**

* *(æ— )*

**Return value**

* ä¸€ä¸ªæ–° `String`ï¼Œå…¶æ–‡æœ¬ä¸åŸå­—ç¬¦ä¸²ç›¸åŒã€‚

**In Depth**

`duplicate()` æ˜¯è·å¾— `String` å‰¯æœ¬çš„ä¸€ç§æ˜¾å¼æ–¹å¼ã€‚ç”±äº `String` æ˜¯ä¸å¯å˜çš„ï¼Œæ‹·è´ä¸»è¦åœ¨è¯­ä¹‰ä¸Šæ›´æ¸…æ™°ï¼šå½“ä½ å¸Œæœ›å¼ºè°ƒè‡ªå·±æ­£åœ¨ä½¿ç”¨ä¸€ä¸ªç‹¬ç«‹çš„å€¼æ—¶å¾ˆæœ‰ç”¨ï¼Œå°½ç®¡ä¿®æ”¹æœ¬å°±æ€»æ˜¯è¿”å›æ–°å­—ç¬¦ä¸²ã€‚

**Example**

```cpp
String original("hello");
String copy = original.duplicate();
// original and copy both represent "hello"
```

*æ­¤ç¤ºä¾‹æ˜¾å¼è·å–å­—ç¬¦ä¸²å€¼çš„å‰¯æœ¬ã€‚*

---

#### `bool contains(const String &sub) const`

**Signature**

```cpp
bool contains(const String &sub) const;
```

**Synopsis**  
å¦‚æœæ­¤å­—ç¬¦ä¸²åŒ…å«ç»™å®šå­ä¸²åˆ™è¿”å› trueã€‚

**Parameters**

* `sub` â€“ è¦æœç´¢çš„å­ä¸²ã€‚

**Return value**

* è‹¥ `sub` è‡³å°‘åœ¨æ­¤å­—ç¬¦ä¸²ä¸­å‡ºç°ä¸€æ¬¡åˆ™ä¸º `true`ï¼Œå¦åˆ™ä¸º `false`ã€‚

**In Depth**

`contains()` æ˜¯ç”¨äºæ£€æŸ¥å­ä¸²æ˜¯å¦å­˜åœ¨çš„ä¾¿æ·å‡½æ•°ã€‚å®ƒé€šå¸¸ä¼šå¯¹å­—ç¬¦åºåˆ—æˆ–å­—èŠ‚åºåˆ—æ‰§è¡Œç›´æ¥æœç´¢ï¼ˆç”±å®ç°å†³å®šï¼‰ï¼Œå¹¶ä¸ä¼šä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ã€‚

å¦‚æœ `sub` ä¸ºç©ºï¼Œå…¶è¡Œä¸ºç”±å®ç°å®šä¹‰ï¼›åœ¨å¤§å¤šæ•°è®¾è®¡ä¸­ï¼Œç©ºå­ä¸²è¢«è§†ä¸ºä»ä½ç½® 0 èµ·å³â€œå­˜åœ¨â€ï¼Œä½†ä½ åº”é¿å…ä¼ å…¥ç©ºå­—ç¬¦ä¸²ã€‚

**Example**

```cpp
String text("Hello, world");
bool hasWorld = text.contains("world");  // true
```

*æ­¤ç¤ºä¾‹æ£€æŸ¥å­—ç¬¦ä¸²ä¸­æ˜¯å¦åŒ…å«æŸä¸ªè¯ã€‚*

---

#### `bool startsWith(const String &sub) const`

**Signature**

```cpp
bool startsWith(const String &sub) const;
```

**Synopsis**  
å¦‚æœæ­¤å­—ç¬¦ä¸²ä»¥ç»™å®šå­ä¸²å¼€å¤´åˆ™è¿”å› trueã€‚

**Parameters**

* `sub` â€“ å‰ç¼€å€™é€‰ã€‚

**Return value**

* è‹¥ `sub` ä¸æ­¤å­—ç¬¦ä¸²å‰ç¼€åŒ¹é…åˆ™ä¸º `true`ï¼Œå¦åˆ™ä¸º `false`ã€‚

**In Depth**

`startsWith()` å¸¸ç”¨äºåè®®æ£€æµ‹ã€è·¯å¾„æ£€æŸ¥ä»¥åŠç®€å•çš„å‰ç¼€è·¯ç”±ã€‚åŒ¹é…æ˜¯ç²¾ç¡®ä¸”åŒºåˆ†å¤§å°å†™çš„ã€‚

**Example**

```cpp
String path("/api/users");
bool isApi = path.startsWith("/api/");  // true
```

*æ­¤ç¤ºä¾‹æ£€æµ‹ä¸€ä¸ªè·¯å¾„æ˜¯å¦å…·æœ‰ç‰¹å®šå‰ç¼€ã€‚*

---

#### `bool endsWith(const String &sub) const`

**Signature**

```cpp
bool endsWith(const String &sub) const;
```

**Synopsis**  
å¦‚æœæ­¤å­—ç¬¦ä¸²ä»¥ç»™å®šå­ä¸²ç»“å°¾åˆ™è¿”å› trueã€‚

**Parameters**

* `sub` â€“ åç¼€å€™é€‰ã€‚

**Return value**

* è‹¥ `sub` ä¸æ­¤å­—ç¬¦ä¸²åç¼€åŒ¹é…åˆ™ä¸º `true`ï¼Œå¦åˆ™ä¸º `false`ã€‚

**In Depth**

`endsWith()` é€‚ç”¨äºæ–‡ä»¶æ‰©å±•åæ£€æŸ¥ã€ç®€å•æ¨¡å¼æ ¡éªŒä»¥åŠç±»ä¼¼çš„åç¼€è§„åˆ™ã€‚åŒ¹é…æ˜¯ç²¾ç¡®ä¸”åŒºåˆ†å¤§å°å†™çš„ã€‚

**Example**

```cpp
String filename("report.txt");
bool isTxt = filename.endsWith(".txt");  // true
```

*æ­¤ç¤ºä¾‹ä½¿ç”¨ `endsWith()` æ£€æŸ¥æ–‡ä»¶æ‰©å±•åã€‚*

---

#### `int count(const String &sub) const`

**Signature**

```cpp
int count(const String &sub) const;
```

**Synopsis**  
è¿”å›å­ä¸²çš„ä¸é‡å å‡ºç°æ¬¡æ•°ã€‚

**Parameters**

* `sub` â€“ è¦è®¡æ•°çš„å­ä¸²ã€‚

**Return value**

* åœ¨æ­¤å­—ç¬¦ä¸²ä¸­ `sub` çš„ä¸é‡å å‡ºç°æ¬¡æ•°ã€‚

**In Depth**

`count()` ä¼šéå†å­—ç¬¦ä¸²ï¼Œå¹¶åœ¨æ¯æ¬¡å‘ç°ä¸€ä¸ªä¸ä¸å‰ä¸€æ¬¡é‡å çš„ `sub` å‡ºç°æ—¶é€’å¢è®¡æ•°ã€‚ä¾‹å¦‚ï¼Œåœ¨ `"aaaa"` ä¸­ç»Ÿè®¡ `"aa"` çš„æ•°é‡ä¼šå¾—åˆ° 2ï¼ˆ`"aa" + "aa"`ï¼‰ã€‚

å¦‚æœ `sub` ä¸ºç©ºï¼Œç»“æœæœªå®šä¹‰ï¼›è¯·é¿å…ä¼ å…¥ç©ºå­ä¸²ã€‚

**Example**

```cpp
String text("one, two, three, two");
int twos = text.count("two");  // 2
```

*æ­¤ç¤ºä¾‹ç»Ÿè®¡ä¸€ä¸ªå•è¯åœ¨å¥å­ä¸­å‡ºç°çš„æ¬¡æ•°ã€‚*

---

#### `int getPositionOf(const String &sub, int start = 0) const`

**Signature**

```cpp
int getPositionOf(const String &sub, int start = 0) const;
```

**Synopsis**  
è¿”å›å­ä¸²çš„å­—ç¬¦ç´¢å¼•ï¼Œè‹¥æœªæ‰¾åˆ°åˆ™è¿”å› -1ã€‚

**Parameters**

* `sub` â€“ è¦æœç´¢çš„å­ä¸²ã€‚
* `start` â€“ å¼€å§‹æœç´¢çš„å­—ç¬¦ç´¢å¼•ï¼ˆé»˜è®¤ä¸º `0`ï¼‰ã€‚

**Return value**

* é¦–æ¬¡åŒ¹é…çš„ä½ç½®ï¼ˆä» `start` èµ·çš„å­—ç¬¦ç´¢å¼•ï¼‰ï¼Œè‹¥æœªæ‰¾åˆ°åˆ™ä¸º `-1`ã€‚

**In Depth**

è¯¥å‡½æ•°ä¼šåœ¨ç»™å®šå­—ç¬¦ä½ç½®å¤„å¼€å§‹ï¼ŒæŸ¥æ‰¾ `sub` çš„**ç¬¬ä¸€æ¬¡å‡ºç°**ã€‚å®ƒä»¥å­—ç¬¦ï¼ˆè€Œéå­—èŠ‚ï¼‰ä¸ºå•ä½æŠ¥å‘Šä½ç½®ï¼Œè¿™ä½¿å¾—ä¸ `substring()` ç»„åˆä½¿ç”¨æ—¶æ›´åŠ æ–¹ä¾¿ã€‚

å¦‚æœä½ éœ€è¦æ‰¾åˆ°æ‰€æœ‰å‡ºç°ä½ç½®ï¼Œå¯ä»¥ä½¿ç”¨å¾ªç¯ï¼Œå°† `start` è®¾ä¸ºä¸Šæ¬¡æ‰¾åˆ°çš„ä½ç½®åŠ ä¸Š `sub` çš„é•¿åº¦ã€‚

**Example**

```cpp
String text("banana");
int pos = text.getPositionOf("na");  // 2
int next = text.getPositionOf("na", pos + 2);  // 4
```

*æ­¤ç¤ºä¾‹æ‰¾åˆ° `"banana"` ä¸­ `"na"` çš„ç¬¬ä¸€æ¬¡å’Œç¬¬äºŒæ¬¡å‡ºç°ã€‚*

---

#### `bool isNumber() const`

**Signature**

```cpp
bool isNumber() const;
```

**Synopsis**  
è‹¥å­—ç¬¦ä¸²ä¸ºæœ‰æ•ˆçš„æ•´æ•°æˆ–å°æ•°åˆ™è¿”å› trueã€‚

**Parameters**

* *(æ— )*

**Return value**

* è‹¥å†…å®¹å¯ä»¥è§£æä¸ºæ•°å­—åˆ™ä¸º `true`ï¼Œå¦åˆ™ä¸º `false`ã€‚

**In Depth**

`isNumber()` æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦å¯ä»¥è¢«è§£é‡Šä¸ºï¼š

* æ•´æ•°ï¼ˆå¦‚ `"42"`ã€`"-7"`ï¼‰ï¼Œæˆ–
* åè¿›åˆ¶æµ®ç‚¹æ•°ï¼ˆå¦‚ `"3.14"`ã€`"0.5"`ï¼‰ã€‚

å½“ä½ éœ€è¦åŒºåˆ†â€œæœ‰æ•ˆæ•°å€¼ 0â€ä¸â€œæ— æ•ˆå­—ç¬¦ä¸²ä½†åŒæ ·ä¼šè¿”å› 0 çš„é»˜è®¤å€¼â€æ—¶ï¼Œåº”åœ¨è°ƒç”¨ `toInteger()` æˆ– `toFloat()` å‰å…ˆä½¿ç”¨æ­¤å‡½æ•°ã€‚

**Example**

```cpp
String s("123");
if (s.isNumber()) {
  int n = s.toInteger();  // 123
}
```

*æ­¤ç¤ºä¾‹åœ¨å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•´æ•°å‰å…ˆéªŒè¯å…¶ä¸ºæ•°å€¼ã€‚*

---

#### `int toInteger() const`

**Signature**

```cpp
int toInteger() const;
```

**Synopsis**  
å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•´æ•°ã€‚è‹¥æ— æ•ˆåˆ™è¿”å› 0ã€‚

**Parameters**

* *(æ— )*

**Return value**

* è§£æå¾—åˆ°çš„æ•´æ•°å€¼ï¼›è‹¥å­—ç¬¦ä¸²ä¸æ˜¯æœ‰æ•ˆæ•´æ•°åˆ™ä¸º `0`ã€‚

**In Depth**

`toInteger()` å°è¯•å°†å†…å®¹è§£æä¸ºåè¿›åˆ¶æ•´æ•°ï¼ˆå¯å¸¦ç¬¦å·ï¼‰ã€‚è‹¥è§£æå¤±è´¥ï¼Œä¼šè¿”å› `0` ä½œä¸ºå›é€€å€¼ã€‚è¿™æ„å‘³ç€ä»…å‡­ `toInteger()` æ— æ³•åŒºåˆ† `"0"` ä¸æ— æ•ˆæ–‡æœ¬ï¼›å¦‚éœ€æ£€æµ‹æ— æ•ˆè¾“å…¥ï¼Œè¯·å…ˆä½¿ç”¨ `isNumber()`ã€‚

**Example**

```cpp
String s("42");
int value = s.toInteger();  // 42

String bad("abc");
int fallback = bad.toInteger();  // 0
```

*æ­¤ç¤ºä¾‹å±•ç¤ºäº†æˆåŠŸå’Œå›é€€çš„æ•´æ•°è½¬æ¢ã€‚*

---

#### `float toFloat() const`

**Signature**

```cpp
float toFloat() const;
```

**Synopsis**  
å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæµ®ç‚¹æ•°ã€‚è‹¥æ— æ•ˆåˆ™è¿”å› 0.0ã€‚

**Parameters**

* *(æ— )*

**Return value**

* è§£æå¾—åˆ°çš„æµ®ç‚¹å€¼ï¼›è‹¥å­—ç¬¦ä¸²ä¸æ˜¯æœ‰æ•ˆæ•°å­—åˆ™ä¸º `0.0f`ã€‚

**In Depth**

`toFloat()` å°†å­—ç¬¦ä¸²è§£æä¸ºåè¿›åˆ¶æµ®ç‚¹æ•°ã€‚è‹¥è§£æå¤±è´¥ï¼Œä¼šè¿”å› `0.0f`ã€‚ä¸ `toInteger()` ç±»ä¼¼ï¼Œå¦‚éœ€åŒºåˆ†æœ‰æ•ˆçš„ `0.0` ä¸æ— æ•ˆæ–‡æœ¬ï¼Œåº”å…ˆä½¿ç”¨ `isNumber()`ã€‚

**Example**

```cpp
String s("3.5");
float value = s.toFloat();  // 3.5f
```

*æ­¤ç¤ºä¾‹å°†åè¿›åˆ¶æ–‡æœ¬è½¬æ¢ä¸º `float`ã€‚*

---

#### `bool toBool() const`

**Signature**

```cpp
bool toBool() const;
```

**Synopsis**  
å¯¹äº "true"ã€"yes"ã€"1"ã€"on"ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰è¿”å› trueã€‚

**Parameters**

* *(æ— )*

**Return value**

* è‹¥æ–‡æœ¬åŒ¹é…æŸä¸ªå·²è¯†åˆ«çš„â€œçœŸâ€å€¼åˆ™ä¸º `true`ï¼Œå¦åˆ™ä¸º `false`ã€‚

**In Depth**

è¯¥è¾…åŠ©å‡½æ•°ä¼šå°†å¤šç§å¸¸è§ç”¨æˆ·è¾“å…¥è§£é‡Šä¸ºå¸ƒå°”å€¼ï¼š

* è¯†åˆ«çš„**çœŸå€¼**ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰ï¼š`"true"`ã€`"yes"`ã€`"1"`ã€`"on"`ã€‚
* ä»»ä½•å…¶ä»–å€¼ï¼ŒåŒ…æ‹¬ `"false"`ã€`"no"`ã€`"0"` ä»¥åŠç©ºå­—ç¬¦ä¸²ï¼Œéƒ½ä¼šå¾—åˆ° `false`ã€‚

è¿™å¯¹äºæ¥å—çµæ´»å¸ƒå°”è¾“å…¥çš„é…ç½®å€¼æˆ–å‘½ä»¤è¡Œå‚æ•°å¾ˆæœ‰ç”¨ã€‚

**Example**

```cpp
String flag("YES");
bool enabled = flag.toBool();  // true
```

*æ­¤ç¤ºä¾‹è§£é‡Šä¸€ä¸ªå¤§å°å†™ä¸æ•æ„Ÿçš„å¸ƒå°”å­—ç¬¦ä¸²ã€‚*

---

#### `String append(const String &s) const`

**Signature**

```cpp
String append(const String &s) const;
```

**Synopsis**  
è¿”å›ä¸€ä¸ªåœ¨æœ«å°¾è¿½åŠ å­ä¸²çš„æ–°å­—ç¬¦ä¸²ã€‚

**Parameters**

* `s` â€“ è¦è¿½åŠ åˆ°æ­¤å­—ç¬¦ä¸²æœ«å°¾çš„æ–‡æœ¬ã€‚

**Return value**

* æ–° `String`ï¼Œç­‰ä»·äº `(*this + s)`ã€‚

**In Depth**

`append()` ç­‰ä»·äº `operator+`ï¼Œåªæ˜¯ä»¥æ–¹æ³•å½¢å¼å‘ˆç°ã€‚åœ¨åå‘æ–¹æ³•è°ƒç”¨é£æ ¼çš„æµå¼è°ƒç”¨é“¾ä¸­é€šå¸¸æ›´æ–¹ä¾¿ã€‚

**Example**

```cpp
String base("Hello");
String result = base.append(", world");  // "Hello, world"
```

*æ­¤ç¤ºä¾‹åœ¨åŸºç¡€å­—ç¬¦ä¸²åè¿½åŠ æ–‡æœ¬ã€‚*

---

#### `String prepend(const String &s) const`

**Signature**

```cpp
String prepend(const String &s) const;
```

**Synopsis**  
è¿”å›ä¸€ä¸ªåœ¨å‰é¢æ·»åŠ å­ä¸²çš„æ–°å­—ç¬¦ä¸²ã€‚

**Parameters**

* `s` â€“ è¦æ”¾åœ¨æ­¤å­—ç¬¦ä¸²å‰é¢çš„æ–‡æœ¬ã€‚

**Return value**

* æ–° `String`ï¼Œç­‰ä»·äº `(s + *this)`ã€‚

**In Depth**

`prepend()` ä¸ `append()` ç›¸åï¼Œå®ƒå°†å‚æ•°æ”¾åœ¨åŸå­—ç¬¦ä¸²ä¹‹å‰ã€‚

**Example**

```cpp
String name("Alice");
String label = name.prepend("User: ");  // "User: Alice"
```

*æ­¤ç¤ºä¾‹åœ¨åå­—å‰é¢åŠ ä¸Šæ ‡ç­¾ã€‚*

---

#### `String insert(int index, const String &s) const`

**Signature**

```cpp
String insert(int index, const String &s) const;
```

**Synopsis**  
è¿”å›ä¸€ä¸ªåœ¨ç»™å®šç´¢å¼•å¤„æ’å…¥å­ä¸²çš„æ–°å­—ç¬¦ä¸²ã€‚

**Parameters**

* `index` â€“ æ’å…¥ `s` çš„å­—ç¬¦ç´¢å¼•ã€‚
* `s` â€“ è¦æ’å…¥çš„æ–‡æœ¬ã€‚

**Return value**

* åœ¨æŒ‡å®šå­—ç¬¦ä½ç½®å°† `s` æ’å…¥åˆ°åŸå­—ç¬¦ä¸²ä¸­å¾—åˆ°çš„æ–° `String`ã€‚

**In Depth**

`insert()` æ˜¯åŸºäºå­—ç¬¦çš„æ“ä½œï¼š

* `index` ä»¥å­—ç¬¦è®¡é‡ï¼ˆä¸ `length()` ç›¸åŒï¼‰ã€‚
* ä½ åº”ä¼ å…¥ä»‹äº `0` ä¸ `length()` ä¹‹é—´çš„å€¼ã€‚è¶…å‡ºæ­¤èŒƒå›´çš„å€¼ä¼šäº§ç”Ÿç”±å®ç°å®šä¹‰çš„è¡Œä¸ºã€‚

`insert(0, s)` ç­‰ä»·äº `s + *this`ã€‚`insert(length(), s)` ç­‰ä»·äº `append(s)`ã€‚

**Example**

```cpp
String base("Hello world");
String updated = base.insert(5, ",");  // "Hello, world"
```

*æ­¤ç¤ºä¾‹åœ¨ä¸¤ä¸ªå•è¯ä¹‹é—´æ’å…¥é€—å·ã€‚*

---

#### `String remove(int start, int end) const`

**Signature**

```cpp
String remove(int start, int end) const;
```

**Synopsis**  
è¿”å›ä¸€ä¸ªç§»é™¤äº†ä» start åˆ° end ä¹‹é—´å­—ç¬¦çš„æ–°å­—ç¬¦ä¸²ã€‚

**Parameters**

* `start` â€“ è¦ç§»é™¤çš„ç¬¬ä¸€ä¸ªå­—ç¬¦çš„å­—ç¬¦ç´¢å¼•ã€‚
* `end` â€“ è¦ç§»é™¤çš„æœ€åä¸€ä¸ªå­—ç¬¦ä¹‹åçš„ä½ç½®ï¼ˆæ’ä»–ï¼‰çš„å­—ç¬¦ç´¢å¼•ã€‚

**Return value**

* ç§»é™¤æŒ‡å®šå­—ç¬¦åŒºé—´åå¾—åˆ°çš„æ–° `String`ã€‚

**In Depth**

`remove()` åŸºäºå­—ç¬¦å·¥ä½œï¼Œå¹¶è¿”å›è·³è¿‡æŒ‡å®šåŒºé—´çš„æ–°å­—ç¬¦ä¸²ã€‚å…¶è¡Œä¸ºç±»ä¼¼äºï¼š

```cpp
substring(0, start) + substring(end)
```

ç´¢å¼•å¿…é¡»æŒ‡å‘å­—ç¬¦ä¸²ä¸­çš„æœ‰æ•ˆå­—ç¬¦ä½ç½®ã€‚

**Example**

```cpp
String text("Hello, world");
String noComma = text.remove(5, 6);  // "Hello world"
```

*æ­¤ç¤ºä¾‹ä»å­—ç¬¦ä¸²ä¸­ç§»é™¤å•ä¸ªå­—ç¬¦ï¼ˆé€—å·ï¼‰ã€‚*

---

#### `String replace(const String &target, const String &replacement) const`

**Signature**

```cpp
String replace(const String &target, const String &replacement) const;
```

**Synopsis**  
è¿”å›ä¸€ä¸ªå°†æ‰€æœ‰ target å‡ºç°ä½ç½®æ›¿æ¢åçš„æ–°å­—ç¬¦ä¸²ã€‚

**Parameters**

* `target` â€“ è¦æœç´¢çš„å­ä¸²ã€‚
* `replacement` â€“ ç”¨æ¥æ›¿æ¢æ¯ä¸ª `target` å‡ºç°ä½ç½®çš„æ–‡æœ¬ã€‚

**Return value**

* æ–° `String`ï¼Œå…¶ä¸­æ¯ä¸ªä¸é‡å çš„ `target` éƒ½è¢«æ›¿æ¢ä¸º `replacement`ã€‚

**In Depth**

`replace()` æ‰§è¡Œå…¨å±€ä¸”ä¸é‡å çš„æ›¿æ¢ã€‚å®ƒä¸ä¼šä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ã€‚å¦‚æœ `target` ä¸ºç©ºï¼Œå…¶è¡Œä¸ºæœªå®šä¹‰ï¼›è¯·å§‹ç»ˆä¼ å…¥éç©ºçš„ `target`ã€‚

**Example**

```cpp
String text("color color");
String american = text.replace("color", "colour");  // "colour colour"
```

*æ­¤ç¤ºä¾‹å°†æ‰€æœ‰å‡ºç°çš„å•è¯æ›¿æ¢ä¸ºå¦ä¸€ä¸ªå•è¯ã€‚*

---

#### `String trim() const`

**Signature**

```cpp
String trim() const;
```

**Synopsis**  
è¿”å›ä¸€ä¸ªå»é™¤é¦–å°¾ç©ºç™½çš„æ–°å­—ç¬¦ä¸²ã€‚

**Parameters**

* *(æ— )*

**Return value**

* å»é™¤ä¸¤ç«¯ç©ºç™½åå¾—åˆ°çš„æ–° `String`ã€‚

**In Depth**

`trim()` ç§»é™¤å­—ç¬¦ä¸²å¼€å¤´å’Œç»“å°¾çš„ç©ºç™½ã€‚å¯¹â€œç©ºç™½â€çš„ç²¾ç¡®å®šä¹‰ç”±å®ç°å†³å®šï¼Œä½†é€šå¸¸åŒ…æ‹¬ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦å’Œæ¢è¡Œç¬¦ã€‚

å­—ç¬¦ä¸²å†…éƒ¨ï¼ˆéç©ºç™½å­—ç¬¦ä¹‹é—´ï¼‰çš„ç©ºç™½ä¸ä¼šå—å½±å“ã€‚

**Example**

```cpp
String raw("   hello  \n");
String cleaned = raw.trim();  // "hello"
```

*æ­¤ç¤ºä¾‹å‰¥ç¦»å›´ç»•æ ‡è®°çš„å¤šä½™ç©ºç™½ã€‚*

---

#### `String upper() const`

**Signature**

```cpp
String upper() const;
```

**Synopsis**  
è¿”å›ä¸€ä¸ªå°†æ‰€æœ‰å­—ç¬¦è½¬ä¸ºå¤§å†™çš„æ–°å­—ç¬¦ä¸²ã€‚

**Parameters**

* *(æ— )*

**Return value**

* æ–° `String`ï¼Œå…¶ä¸­é€‚ç”¨çš„å­—ç¬¦è¢«è½¬æ¢ä¸ºå¤§å†™ã€‚

**In Depth**

`upper()` å°†å­—æ¯å­—ç¬¦è½¬æ¢ä¸ºå¤§å†™ã€‚å¯¹äº ASCII å­—æ¯ï¼Œè¿™æ˜¯ç›´æ¥æ˜ å°„ã€‚å¯¹äº Unicode å­—æ¯ï¼Œå…·ä½“è¡Œä¸ºå–å†³äºå®ç°å¯¹ Unicode çš„æ”¯æŒæƒ…å†µã€‚

åœ¨åšä¸åŒºåˆ†å¤§å°å†™çš„æ¯”è¾ƒæ—¶ï¼Œå¯ä»¥å°†ä¸¤ä¸ªå­—ç¬¦ä¸²éƒ½è°ƒç”¨ `lower()` æˆ– `upper()` åå†æ¯”è¾ƒã€‚

**Example**

```cpp
String text("Hello");
String shout = text.upper();  // "HELLO"
```

*æ­¤ç¤ºä¾‹å°†æ‰€æœ‰å­—æ¯è½¬ä¸ºå¤§å†™ã€‚*

---

#### `String lower() const`

**Signature**

```cpp
String lower() const;
```

**Synopsis**  
è¿”å›ä¸€ä¸ªå°†æ‰€æœ‰å­—ç¬¦è½¬ä¸ºå°å†™çš„æ–°å­—ç¬¦ä¸²ã€‚

**Parameters**

* *(æ— )*

**Return value**

* æ–° `String`ï¼Œå…¶ä¸­é€‚ç”¨çš„å­—ç¬¦è¢«è½¬æ¢ä¸ºå°å†™ã€‚

**In Depth**

`lower()` æ˜¯ `upper()` çš„å¯¹åº”æ“ä½œã€‚åœ¨è¿›è¡Œç®€å•çš„å¤§å°å†™ä¸æ•æ„Ÿæ¯”è¾ƒæ—¶å°¤å…¶æœ‰ç”¨ï¼š

```cpp
a.lower().equals(b.lower())
```

**Example**

```cpp
String text("HeLLo");
String normalized = text.lower();  // "hello"
```

*æ­¤ç¤ºä¾‹å°†æ··åˆå¤§å°å†™æ–‡æœ¬è½¬æ¢ä¸ºå°å†™ã€‚*

---

#### `String reverse() const`

**Signature**

```cpp
String reverse() const;
```

**Synopsis**  
è¿”å›ä¸€ä¸ªå­—ç¬¦é¡ºåºåè½¬çš„æ–°å­—ç¬¦ä¸²ã€‚

**Parameters**

* *(æ— )*

**Return value**

* æ–° `String`ï¼Œå…¶å­—ç¬¦é¡ºåºä¸ºåŸå­—ç¬¦ä¸²çš„åè½¬ã€‚

**In Depth**

`reverse()` åœ¨**å­—ç¬¦**å±‚é¢ä¸Šå·¥ä½œï¼Œå› æ­¤å¤šå­—èŠ‚ UTF-8 å­—ç¬¦ä¿æŒå®Œæ•´ï¼Œä¸ä¼šè¢«æ‹†ä¸ºå­—èŠ‚ã€‚

**Example**

```cpp
String text("abc");
String reversed = text.reverse();  // "cba"
```

*æ­¤ç¤ºä¾‹åè½¬å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦é¡ºåºã€‚*

---

#### `String repeat(int count) const`

**Signature**

```cpp
String repeat(int count) const;
```

**Synopsis**  
è¿”å›ä¸€ä¸ªå°†å†…å®¹é‡å¤ count æ¬¡çš„æ–°å­—ç¬¦ä¸²ã€‚

**Parameters**

* `count` â€“ é‡å¤æ•´ä¸ªå­—ç¬¦ä¸²çš„æ¬¡æ•°ã€‚

**Return value**

* æ–° `String`ï¼Œç­‰äºå½“å‰å­—ç¬¦ä¸²ä¸è‡ªèº«æ‹¼æ¥ `count` æ¬¡çš„ç»“æœã€‚

**In Depth**

è‹¥ `count` ä¸ºï¼š

* `0` â€“ ç»“æœä¸ºç©ºå­—ç¬¦ä¸²ã€‚
* `1` â€“ ç»“æœä¸ºåŸå­—ç¬¦ä¸²çš„ä¸€ä¸ªå‰¯æœ¬ã€‚
* è´Ÿæ•° â€“ è¡Œä¸ºç”±å®ç°å®šä¹‰ï¼›è¯·ä¼ å…¥éè´Ÿçš„è®¡æ•°ã€‚

**Example**

```cpp
String dot(".");
String ellipsis = dot.repeat(3);  // "..."
```

*æ­¤ç¤ºä¾‹å°†å•å­—ç¬¦å­—ç¬¦ä¸²é‡å¤ä»¥æ„é€ çœç•¥å·ã€‚*

---

#### `bool equals(const String &other) const`

**Signature**

```cpp
bool equals(const String &other) const;
```

**Synopsis**  
è‹¥æ­¤å­—ç¬¦ä¸²ç­‰äºå¦ä¸€ä¸ªå­—ç¬¦ä¸²åˆ™è¿”å› trueã€‚

**Parameters**

* `other` â€“ è¦æ¯”è¾ƒçš„å­—ç¬¦ä¸²ã€‚

**Return value**

* è‹¥ä¸¤ä¸ªå­—ç¬¦ä¸²åŒ…å«å®Œå…¨ç›¸åŒçš„å­—èŠ‚åºåˆ—åˆ™ä¸º `true`ï¼Œå¦åˆ™ä¸º `false`ã€‚

**In Depth**

`equals()` æ‰§è¡Œç²¾ç¡®ã€åŒºåˆ†å¤§å°å†™çš„ç›¸ç­‰æ€§æ£€æŸ¥ã€‚å®ƒç­‰ä»·äº `operator==`ï¼Œä½†æœ‰äº›å¼€å‘è€…æ›´åå¥½ä½¿ç”¨å…·åæ–¹æ³•ï¼Œå°¤å…¶æ˜¯åœ¨é“¾å¼è°ƒç”¨æˆ–ä½œä¸ºå›è°ƒä¼ é€’æ—¶æ›´æ¸…æ™°ã€‚

**Example**

```cpp
String a("test");
String b("test");
bool same = a.equals(b);  // true
```

*æ­¤ç¤ºä¾‹ä½¿ç”¨ `equals()` æ–¹æ³•æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ã€‚*

---

#### `int compare(const String &other) const`

**Signature**

```cpp
int compare(const String &other) const;
```

**Synopsis**  
æŒ‰å­—å…¸åºæ¯”è¾ƒã€‚è¿”å› <0ã€0 æˆ– >0ã€‚

**Parameters**

* `other` â€“ ç”¨äºæ¯”è¾ƒçš„å­—ç¬¦ä¸²ã€‚

**Return value**

* è‹¥ `*this` åœ¨å­—å…¸åºä¸Šå°äº `other`ï¼Œåˆ™è¿”å›è´Ÿå€¼ã€‚
* è‹¥ä¸¤è€…ç›¸ç­‰ï¼Œè¿”å› `0`ã€‚
* è‹¥ `*this` åœ¨å­—å…¸åºä¸Šå¤§äº `other`ï¼Œåˆ™è¿”å›æ­£å€¼ã€‚

**In Depth**

`compare()` æ ¹æ®åº•å±‚å­—èŠ‚åºåˆ—ï¼ˆæˆ–å­—ç¬¦åºåˆ—ï¼Œå–å†³äºå®ç°ï¼‰æ‰§è¡Œå­—å…¸åºæ¯”è¾ƒã€‚å®ƒé€‚ç”¨äºæ’åºä¸æ’åºç›¸å…³çš„æ“ä½œã€‚

**Example**

```cpp
String a("apple");
String b("banana");

int result = a.compare(b);  // result < 0
```

*æ­¤ç¤ºä¾‹æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ä»¥ç¡®å®šå…¶æ’åºé¡ºåºã€‚*

---

#### `bool operator==(const String &other) const`

**Signature**

```cpp
bool operator==(const String &other) const;
```

**Synopsis**  
è‹¥æ­¤å­—ç¬¦ä¸²ç­‰äºå¦ä¸€ä¸ªå­—ç¬¦ä¸²åˆ™è¿”å› trueã€‚

**Parameters**

* `other` â€“ è¦æ¯”è¾ƒçš„å­—ç¬¦ä¸²ã€‚

**Return value**

* è‹¥å­—ç¬¦ä¸²ç›¸ç­‰åˆ™ä¸º `true`ï¼Œå¦åˆ™ä¸º `false`ã€‚

**In Depth**

è¯¥è¿ç®—ç¬¦æ˜¯ `equals(other)` çš„æ›´ç¬¦åˆ C++ ä¹ æƒ¯çš„ç®€å†™ã€‚å¯æŒ‰å¸¸è§„æ–¹å¼ä½¿ç”¨ï¼š

```cpp
if (a == b) { ... }
```

**Example**

```cpp
String a("hello");
String b("hello");
String c("world");

bool ab = (a == b);  // true
bool ac = (a == c);  // false
```

*æ­¤ç¤ºä¾‹ä½¿ç”¨ç›¸ç­‰è¿ç®—ç¬¦æ¯”è¾ƒå­—ç¬¦ä¸²ã€‚*

---

#### `bool operator!=(const String &other) const`

**Signature**

```cpp
bool operator!=(const String &other) const;
```

**Synopsis**  
è‹¥æ­¤å­—ç¬¦ä¸²ä¸ç­‰äºå¦ä¸€ä¸ªå­—ç¬¦ä¸²åˆ™è¿”å› trueã€‚

**Parameters**

* `other` â€“ è¦æ¯”è¾ƒçš„å­—ç¬¦ä¸²ã€‚

**Return value**

* è‹¥å­—ç¬¦ä¸²ä¸ç›¸ç­‰åˆ™ä¸º `true`ï¼Œè‹¥ç›¸ç­‰åˆ™ä¸º `false`ã€‚

**In Depth**

è¯¥è¿ç®—ç¬¦åªæ˜¯ `operator==` çš„é€»è¾‘éã€‚

**Example**

```cpp
String a("hello");
String b("world");

if (a != b) {
  // strings differ
}
```

*æ­¤ç¤ºä¾‹åœ¨ä¸¤ä¸ªå­—ç¬¦ä¸²ä¸ç›¸ç­‰æ—¶è¿›è¡Œåˆ†æ”¯ã€‚*

---

#### `String operator+(const String &other) const`

**Signature**

```cpp
String operator+(const String &other) const;
```

**Synopsis**  
è¿”å›æ­¤å­—ç¬¦ä¸²ä¸å¦ä¸€ä¸ªå­—ç¬¦ä¸²æ‹¼æ¥åçš„ç»“æœã€‚

**Parameters**

* `other` â€“ è¦è¿½åŠ åˆ°æ­¤å­—ç¬¦ä¸²æœ«å°¾çš„å­—ç¬¦ä¸²ã€‚

**Return value**

* æ–° `String`ï¼ŒåŒ…å« `*this` ä¸ `other` æ‹¼æ¥åçš„å†…å®¹ã€‚

**In Depth**

è¯¥è¿ç®—ç¬¦æ˜¯è¿æ¥å­—ç¬¦ä¸²çš„ä¸»è¦æ–¹å¼ã€‚å®ƒä¸ä¼šä¿®æ”¹ä»»ä¸€æ“ä½œæ•°ï¼Œè€Œæ˜¯è¿”å›åŒ…å«åˆå¹¶æ–‡æœ¬çš„æ–°å­—ç¬¦ä¸²ã€‚

**Example**

```cpp
String first("Hello");
String second(" world");
String combined = first + second;  // "Hello world"
```

*æ­¤ç¤ºä¾‹ä½¿ç”¨ `+` è¿ç®—ç¬¦æ‹¼æ¥ä¸¤ä¸ªå­—ç¬¦ä¸²ã€‚*

---

#### `int hash() const`

**Signature**

```cpp
int hash() const;
```

**Synopsis**  
è¿”å›æ­¤å­—ç¬¦ä¸²çš„å“ˆå¸Œç ã€‚

**Parameters**

* *(æ— )*

**Return value**

* ä»å­—ç¬¦ä¸²å†…å®¹æ´¾ç”Ÿçš„æ•´æ•°å“ˆå¸Œç ã€‚

**In Depth**

è¯¥å“ˆå¸Œç é€‚åˆåœ¨å“ˆå¸Œè¡¨æˆ–é›†åˆä¸­ä½¿ç”¨ã€‚å…·ä½“ç®—æ³•æœªæŒ‡å®šï¼Œå¹¶å¯èƒ½åœ¨åº“ç‰ˆæœ¬ä¹‹é—´å‘ç”Ÿå˜åŒ–ï¼Œå› æ­¤ä½ ä¸åº”å°†å“ˆå¸Œç æŒä¹…åŒ–ï¼Œä¹Ÿä¸åº”ä¾èµ–å…¶ç¨³å®šæ€§ã€‚

**Example**

```cpp
String key("user:42");
int h = key.hash();
// h can be used in a custom hash-based structure
```

*æ­¤ç¤ºä¾‹ä»å­—ç¬¦ä¸²é”®è®¡ç®—å“ˆå¸Œç ã€‚*

---

#### `List lines() const`

**Signature**

```cpp
List lines() const;
```

**Synopsis**  
æŒ‰æ¢è¡Œç¬¦æ‹†åˆ†æ­¤å­—ç¬¦ä¸²ä¸ºåˆ—è¡¨ã€‚

**Parameters**

* *(æ— )*

**Return value**

* ä¸€ä¸ª `List`ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªè¡¨ç¤ºä¸€è¡Œæ–‡æœ¬çš„ `String`ã€‚

**In Depth**

`lines()` åœ¨æ¢è¡Œç¬¦è¾¹ç•Œå¤„å°†å­—ç¬¦ä¸²æ‹†åˆ†ä¸ºç‹¬ç«‹çš„è¡Œã€‚å¯¹ `'\r\n'` ä¸ `'\n'` çš„ç²¾ç¡®å¤„ç†æ˜¯å®ç°ç‰¹å®šçš„ï¼Œä½†å…¸å‹è¡Œä¸ºæ˜¯åœ¨ `'\n'` å¤„åˆ†å‰²å¹¶å»æ‰æœ«å°¾çš„ `'\r'`ã€‚

åœ¨å¤„ç†é…ç½®æ–‡ä»¶ã€æ—¥å¿—æˆ–ä»»ä½•å¤šè¡Œæ–‡æœ¬æ—¶éƒ½éå¸¸æœ‰ç”¨ã€‚

**Example**

```cpp
String text("first line\nsecond line");
List ls = text.lines();
// ls[0] == "first line"
// ls[1] == "second line"
```

*æ­¤ç¤ºä¾‹å°†å¤šè¡Œå­—ç¬¦ä¸²æ‹†åˆ†ä¸ºç‹¬ç«‹çš„è¡Œã€‚*

---

#### `String join(const List &list) const`

**Signature**

```cpp
String join(const List &list) const;
```

**Synopsis**  
ä½¿ç”¨æ­¤å­—ç¬¦ä¸²ä½œä¸ºåˆ†éš”ç¬¦è¿æ¥åˆ—è¡¨å…ƒç´ ã€‚

**Parameters**

* `list` â€“ è¦è¿æ¥çš„ `List`ã€‚æ¯ä¸ªå…ƒç´ éƒ½ä¼šè¢«è½¬æ¢ä¸º `String`ã€‚

**Return value**

* æ–° `String`ï¼Œç”±æ‰€æœ‰å…ƒç´ è¿æ¥è€Œæˆï¼Œå¹¶åœ¨å…¶é—´æ’å…¥ `*this` ä½œä¸ºåˆ†éš”ç¬¦ã€‚

**In Depth**

`join()` å°†å½“å‰ `String` è§†ä¸º**åˆ†éš”ç¬¦**ã€‚ä¾‹å¦‚ï¼Œ`String(", ").join(items)` ä¼šç”¨ `", "` å°†å„å…ƒç´ è¿æ¥èµ·æ¥ã€‚

å¦‚æœ `list` ä¸ºç©ºï¼Œç»“æœä¸ºç©ºå­—ç¬¦ä¸²ã€‚å¦‚æœ `list` ä»…æœ‰ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™ä¸ä¼šæ’å…¥åˆ†éš”ç¬¦ã€‚

**Example**

```cpp
List items;
items.append("a").append("b").append("c");

String sep(", ");
String joined = sep.join(items);  // "a, b, c"
```

*æ­¤ç¤ºä¾‹ä½¿ç”¨é€—å·å’Œç©ºæ ¼ä½œä¸ºåˆ†éš”ç¬¦è¿æ¥åˆ—è¡¨é¡¹ã€‚*

---

#### `List split(const String &sep, int max = 1) const`

**Signature**

```cpp
List split(const String &sep, int max = 1) const;
```

**Synopsis**  
æŒ‰åˆ†éš”ç¬¦æ‹†åˆ†ä¸ºåˆ—è¡¨ã€‚max æ§åˆ¶æœ€å¤§æ‹†åˆ†æ¬¡æ•°ã€‚

**Parameters**

* `sep` â€“ éç©ºåˆ†éš”å­ä¸²ã€‚
* `max` â€“ è¦æ‰§è¡Œçš„æœ€å¤§æ‹†åˆ†æ¬¡æ•°ã€‚é»˜è®¤å€¼ `1` è¡¨ç¤ºâ€œè‡³å¤šæ‹†åˆ†ä¸€æ¬¡â€ï¼Œå› æ­¤ç»“æœæœ€å¤šä¸ºä¸¤ä¸ªå…ƒç´ ã€‚

**Return value**

* ç”± `String` ç‰‡æ®µç»„æˆçš„ `List`ã€‚

**In Depth**

è¯¥å‡½æ•°åœ¨æ¯æ¬¡å‡ºç° `sep` æ—¶å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ‹†åˆ†ï¼Œæœ€å¤šæ‹†åˆ† `max` æ¬¡ï¼š

* è‹¥ `max == 1`ï¼ˆé»˜è®¤ï¼‰ï¼Œä½ æœ€å¤šå¾—åˆ°ä¸¤éƒ¨åˆ†ï¼šç¬¬ä¸€ä¸ª `sep` ä¹‹å‰çš„éƒ¨åˆ†å’Œå…¶åçš„æ‰€æœ‰å†…å®¹ã€‚
* è‹¥ `max <= 0`ï¼Œè¡Œä¸ºç”±å®ç°å®šä¹‰ï¼›è¯·ä¼ å…¥ `max >= 1`ã€‚

åˆ†éš”ç¬¦è‡ªèº«ä¸ä¼šå‡ºç°åœ¨ç»“æœä¸­ã€‚

**Example**

```cpp
String text("key=value=extra");
List parts = text.split("=", 1);
// parts[0] == "key"
// parts[1] == "value=extra"
```

*æ­¤ç¤ºä¾‹ä»…åœ¨ç¬¬ä¸€ä¸ª `=` å¤„åˆ†å‰²ï¼Œä¿ç•™å­—ç¬¦ä¸²çš„å…¶ä½™éƒ¨åˆ†ã€‚*

---

#### `List split() const`

**Signature**

```cpp
List split() const;
```

**Synopsis**  
æŒ‰ç©ºç™½å­—ç¬¦æ‹†åˆ†ä¸ºåˆ—è¡¨ã€‚

**Parameters**

* *(æ— )*

**Return value**

* ç”± `String` ç»„æˆçš„ `List`ï¼Œå„å…ƒç´ ç”±ä¸€ä¸ªæˆ–å¤šä¸ªç©ºç™½å­—ç¬¦åˆ†éš”ã€‚

**In Depth**

æ­¤ä¾¿æ·é‡è½½å°†å­—ç¬¦ä¸²æŒ‰ç©ºç™½ï¼ˆç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢è¡Œç¬¦ç­‰ï¼‰æ‹†åˆ†ä¸ºæ ‡è®°ã€‚è¿ç»­ç©ºç™½é€šå¸¸è¢«è§†ä¸ºå•ä¸ªåˆ†éš”ç¬¦ã€‚

ç”±é¦–å°¾ç©ºç™½äº§ç”Ÿçš„ç©ºæ ‡è®°é€šå¸¸ä¼šè¢«ä¸¢å¼ƒã€‚

**Example**

```cpp
String text(" one  two   three ");
List tokens = text.split();
// tokens[0] == "one"
// tokens[1] == "two"
// tokens[2] == "three"
```

*æ­¤ç¤ºä¾‹æŒ‰ç©ºç™½å¯¹å­—ç¬¦ä¸²è¿›è¡Œåˆ†è¯ã€‚*

---

#### `String format(const List &list) const`

**Signature**

```cpp
String format(const List &list) const;
```

**Synopsis**  
å°† {0}ã€{1} ç­‰å ä½ç¬¦æ›¿æ¢ä¸ºåˆ—è¡¨å…ƒç´ ã€‚

**Parameters**

* `list` â€“ å…¶å…ƒç´ å°†è¢«æ›¿æ¢è¿›æ¨¡æ¿å­—ç¬¦ä¸²çš„ `List`ã€‚

**Return value**

* æ–° `String`ï¼Œå…¶ä¸­ `{n}` å ä½ç¬¦è¢«å¯¹åº”å…ƒç´ çš„å­—ç¬¦ä¸²è¡¨ç¤ºæ›¿æ¢ã€‚

**In Depth**

è¯¥å‡½æ•°å°†å½“å‰å­—ç¬¦ä¸²è§†ä¸º**æ¨¡æ¿**ï¼Œå¹¶å°†å½¢å¦‚ `{0}`ã€`{1}`ã€`{2}` â€¦ çš„å ä½ç¬¦æ›¿æ¢ä¸º `list[0]`ã€`list[1]` ç­‰çš„ `String` è¡¨ç¤ºã€‚

ç¤ºä¾‹æ¨¡æ¿ï¼š

* æ¨¡æ¿ï¼š`"Hello, {0}! You have {1} messages."`
* åˆ—è¡¨ï¼š`["Alice", 3]`
* ç»“æœï¼š`"Hello, Alice! You have 3 messages."`

è‹¥æŸä¸ªå ä½ç¬¦ç´¢å¼•è¶…å‡º `list` èŒƒå›´ï¼Œå…¶è¡Œä¸ºç”±å®ç°å®šä¹‰ï¼›ä½ åº”ç¡®ä¿åˆ—è¡¨åŒ…å«æ‰€æœ‰æ‰€éœ€çš„å€¼ã€‚

**Example**

```cpp
String tmpl("Hello, {0}! You have {1} messages.");

List args;
args.append("Alice").append(3);

String message = tmpl.format(args);
// "Hello, Alice! You have 3 messages."
```

*æ­¤ç¤ºä¾‹ä½¿ç”¨åŸºäºåˆ—è¡¨çš„å ä½ç¬¦æ ¼å¼åŒ–é—®å€™è¯­ã€‚*

---

#### `String format(const Map &map) const`

**Signature**

```cpp
String format(const Map &map) const;
```

**Synopsis**  
å°† {key} å ä½ç¬¦æ›¿æ¢ä¸ºæ˜ å°„ä¸­çš„å€¼ã€‚

**Parameters**

* `map` â€“ ä¸ºå…·åå ä½ç¬¦æä¾›å€¼çš„ `Map`ã€‚

**Return value**

* æ–° `String`ï¼Œå…¶ä¸­ `{key}` å ä½ç¬¦è¢«å¯¹åº” map å€¼çš„å­—ç¬¦ä¸²è¡¨ç¤ºæ›¿æ¢ã€‚

**In Depth**

è¯¥é‡è½½æ”¯æŒ**å…·åå ä½ç¬¦**ï¼Œé€šå¸¸æ¯”æ•°å­—ç´¢å¼•æ›´æ¸…æ™°ã€‚ä¾‹å¦‚ï¼š

* æ¨¡æ¿ï¼š`"Name: {name}, Age: {age}"`
* Mapï¼š`{ "name": "Alice", "age": 30 }`
* ç»“æœï¼š`"Name: Alice, Age: 30"`

è‹¥æŸä¸ªå ä½ç¬¦é”®åœ¨ map ä¸­ä¸å­˜åœ¨ï¼Œå…¶è¡Œä¸ºç”±å®ç°å®šä¹‰ï¼›æœ€ä½³å®è·µæ˜¯ç¡®ä¿ map åŒ…å«æ‰€æœ‰å¼•ç”¨çš„é”®ã€‚

**Example**

```cpp
String tmpl("Name: {name}, Age: {age}");

Map args;
args.put("name", "Alice").put("age", 30);

String result = tmpl.format(args);
// "Name: Alice, Age: 30"
```

*æ­¤ç¤ºä¾‹é€šè¿‡ map å¡«å……æ¨¡æ¿å­—ç¬¦ä¸²ä¸­çš„å…·åå ä½ç¬¦ã€‚*

---

#### `String operator+(const char *lhs, const String &rhs)`

**Signature**

```cpp
inline String operator+(const char *lhs, const String &rhs) {
  return String(lhs) + rhs;
}
```

**Synopsis**  
ç”¨äºè‡ªç„¶è¯­æ³•çš„å­—ç¬¦ä¸²æ‹¼æ¥è¿ç®—ç¬¦ï¼š"Hello " + myString

**Parameters**

* `lhs` â€“ å·¦ä¾§çš„ C é£æ ¼ UTF-8 å­—ç¬¦ä¸²ã€‚
* `rhs` â€“ å³ä¾§çš„ `String`ã€‚

**Return value**

* æ–° `String`ï¼Œç­‰ä»·äº `String(lhs).operator+(rhs)`ã€‚

**In Depth**

è¿™ä¸ªéæˆå‘˜è¿ç®—ç¬¦å…è®¸ä½ ç¼–å†™å¦‚ä¸‹è¡¨è¾¾å¼ï¼š

```cpp
"Hello " + myString
```

è€Œæ— éœ€åœ¨å·¦ä¾§æ˜¾å¼æ„é€  `String`ã€‚åœ¨ç»„åˆå­—ç¬¦ä¸²å­—é¢é‡å’Œ `String` å¯¹è±¡æ—¶ï¼Œè¿™æé«˜äº†å¯è¯»æ€§ã€‚

**Example**

```cpp
String name("Alice");
String greeting = "Hello, " + name;  // "Hello, Alice"
```

*æ­¤ç¤ºä¾‹ä½¿ç”¨è‡ªç”±å‡½æ•° `operator+` ä»¥è‡ªç„¶é¡ºåºæ‹¼æ¥å­—é¢é‡ä¸ `String`ã€‚*